(()=>{var a={};a.id=293,a.ids=[293],a.modules={261:a=>{"use strict";a.exports=require("next/dist/shared/lib/router/utils/app-paths")},3295:a=>{"use strict";a.exports=require("next/dist/server/app-render/after-task-async-storage.external.js")},10846:a=>{"use strict";a.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},12412:a=>{"use strict";a.exports=require("assert")},14545:(a,b,c)=>{"use strict";Object.defineProperty(b,"__esModule",{value:!0}),Object.defineProperty(b,"default",{enumerable:!0,get:function(){return f}});let d=c(97535);function e({config:a,src:b,width:c,quality:e}){if(b.startsWith("/")&&b.includes("?")&&a.localPatterns?.length===1&&"**"===a.localPatterns[0].pathname&&""===a.localPatterns[0].search)throw Object.defineProperty(Error(`Image with src "${b}" is using a query string which is not configured in images.localPatterns.
Read more: https://nextjs.org/docs/messages/next-image-unconfigured-localpatterns`),"__NEXT_ERROR_CODE",{value:"E871",enumerable:!1,configurable:!0});let f=(0,d.findClosestQuality)(e,a);return`${a.path}?url=${encodeURIComponent(b)}&w=${c}&q=${f}${b.startsWith("/_next/static/media/"),""}`}e.__next_img_default=!0;let f=e},15384:(a,b)=>{"use strict";Object.defineProperty(b,"__esModule",{value:!0});var c={VALID_LOADERS:function(){return e},imageConfigDefault:function(){return f}};for(var d in c)Object.defineProperty(b,d,{enumerable:!0,get:c[d]});let e=["default","imgix","cloudinary","akamai","custom"],f={deviceSizes:[640,750,828,1080,1200,1920,2048,3840],imageSizes:[32,48,64,96,128,256,384],path:"/_next/image",loader:"default",loaderFile:"",domains:[],disableStaticImages:!1,minimumCacheTTL:14400,formats:["image/webp"],maximumRedirects:3,dangerouslyAllowLocalIP:!1,dangerouslyAllowSVG:!1,contentSecurityPolicy:"script-src 'none'; frame-src 'none'; sandbox;",contentDispositionType:"attachment",localPatterns:void 0,remotePatterns:[],qualities:[75],unoptimized:!1}},15481:(a,b,c)=>{"use strict";Object.defineProperty(b,"__esModule",{value:!0});var d={default:function(){return k},getImageProps:function(){return j}};for(var e in d)Object.defineProperty(b,e,{enumerable:!0,get:d[e]});let f=c(11966),g=c(46869),h=c(25225),i=f._(c(14545));function j(a){let{props:b}=(0,g.getImgProps)(a,{defaultLoader:i.default,imgConf:{deviceSizes:[640,750,828,1080,1200,1920,2048,3840],imageSizes:[32,48,64,96,128,256,384],qualities:[75],path:"/_next/image",loader:"default",dangerouslyAllowSVG:!1,unoptimized:!1}});for(let[a,c]of Object.entries(b))void 0===c&&delete b[a];return{props:b}}let k=h.Image},19121:a=>{"use strict";a.exports=require("next/dist/server/app-render/action-async-storage.external.js")},19470:(a,b,c)=>{Promise.resolve().then(c.bind(c,53677))},21820:a=>{"use strict";a.exports=require("os")},25225:(a,b,c)=>{"use strict";Object.defineProperty(b,"__esModule",{value:!0}),Object.defineProperty(b,"Image",{enumerable:!0,get:function(){return u}});let d=c(11966),e=c(40713),f=c(26835),g=e._(c(53830)),h=d._(c(73755)),i=d._(c(57284)),j=c(46869),k=c(15384),l=c(64211);c(15600);let m=c(63824),n=d._(c(14545)),o=c(51562),p={deviceSizes:[640,750,828,1080,1200,1920,2048,3840],imageSizes:[32,48,64,96,128,256,384],qualities:[75],path:"/_next/image",loader:"default",dangerouslyAllowSVG:!1,unoptimized:!1};function q(a,b,c,d,e,f,g){let h=a?.src;a&&a["data-loaded-src"]!==h&&(a["data-loaded-src"]=h,("decode"in a?a.decode():Promise.resolve()).catch(()=>{}).then(()=>{if(a.parentElement&&a.isConnected){if("empty"!==b&&e(!0),c?.current){let b=new Event("load");Object.defineProperty(b,"target",{writable:!1,value:a});let d=!1,e=!1;c.current({...b,nativeEvent:b,currentTarget:a,target:a,isDefaultPrevented:()=>d,isPropagationStopped:()=>e,persist:()=>{},preventDefault:()=>{d=!0,b.preventDefault()},stopPropagation:()=>{e=!0,b.stopPropagation()}})}d?.current&&d.current(a)}}))}function r(a){return g.use?{fetchPriority:a}:{fetchpriority:a}}globalThis.__NEXT_IMAGE_IMPORTED=!0;let s=(0,g.forwardRef)(({src:a,srcSet:b,sizes:c,height:d,width:e,decoding:h,className:i,style:j,fetchPriority:k,placeholder:l,loading:m,unoptimized:n,fill:p,onLoadRef:s,onLoadingCompleteRef:t,setBlurComplete:u,setShowAltText:v,sizesInput:w,onLoad:x,onError:y,...z},A)=>{let B=(0,g.useCallback)(a=>{a&&(y&&(a.src=a.src),a.complete&&q(a,l,s,t,u,n,w))},[a,l,s,t,u,y,n,w]),C=(0,o.useMergedRef)(A,B);return(0,f.jsx)("img",{...z,...r(k),loading:m,width:e,height:d,decoding:h,"data-nimg":p?"fill":"1",className:i,style:j,sizes:c,srcSet:b,src:a,ref:C,onLoad:a=>{q(a.currentTarget,l,s,t,u,n,w)},onError:a=>{v(!0),"empty"!==l&&u(!0),y&&y(a)}})});function t({isAppRouter:a,imgAttributes:b}){let c={as:"image",imageSrcSet:b.srcSet,imageSizes:b.sizes,crossOrigin:b.crossOrigin,referrerPolicy:b.referrerPolicy,...r(b.fetchPriority)};return a&&h.default.preload?(h.default.preload(b.src,c),null):(0,f.jsx)(i.default,{children:(0,f.jsx)("link",{rel:"preload",href:b.srcSet?void 0:b.src,...c},"__nimg-"+b.src+b.srcSet+b.sizes)})}let u=(0,g.forwardRef)((a,b)=>{let c=(0,g.useContext)(m.RouterContext),d=(0,g.useContext)(l.ImageConfigContext),e=(0,g.useMemo)(()=>{let a=p||d||k.imageConfigDefault,b=[...a.deviceSizes,...a.imageSizes].sort((a,b)=>a-b),c=a.deviceSizes.sort((a,b)=>a-b),e=a.qualities?.sort((a,b)=>a-b);return{...a,allSizes:b,deviceSizes:c,qualities:e,localPatterns:d?.localPatterns}},[d]),{onLoad:h,onLoadingComplete:i}=a,o=(0,g.useRef)(h);(0,g.useEffect)(()=>{o.current=h},[h]);let q=(0,g.useRef)(i);(0,g.useEffect)(()=>{q.current=i},[i]);let[r,u]=(0,g.useState)(!1),[v,w]=(0,g.useState)(!1),{props:x,meta:y}=(0,j.getImgProps)(a,{defaultLoader:n.default,imgConf:e,blurComplete:r,showAltText:v});return(0,f.jsxs)(f.Fragment,{children:[(0,f.jsx)(s,{...x,unoptimized:y.unoptimized,placeholder:y.placeholder,fill:y.fill,onLoadRef:o,onLoadingCompleteRef:q,setBlurComplete:u,setShowAltText:w,sizesInput:a.sizes,ref:b}),y.preload?(0,f.jsx)(t,{isAppRouter:!c,imgAttributes:x}):null]})});("function"==typeof b.default||"object"==typeof b.default&&null!==b.default)&&void 0===b.default.__esModule&&(Object.defineProperty(b.default,"__esModule",{value:!0}),Object.assign(b.default,b),a.exports=b.default)},26713:a=>{"use strict";a.exports=require("next/dist/shared/lib/router/utils/is-bot")},27910:a=>{"use strict";a.exports=require("stream")},28354:a=>{"use strict";a.exports=require("util")},29021:a=>{"use strict";a.exports=require("fs")},29294:a=>{"use strict";a.exports=require("next/dist/server/app-render/work-async-storage.external.js")},29733:(a,b,c)=>{"use strict";c.d(b,{e:()=>G});var d=c(26835),e=c(53830),f=c(30978),g=c.n(f),h=c(28217),i=c(51570),j=c(83533),k=c(15468),l=c(57242),m=c(91827),n=c(31355),o=c(73007),p=c(60967),q=c(38037),r=c(57132);let s=[{name:"Dashboard",href:"/",icon:j.A},{name:"Courses",href:"/courses",icon:k.A},{name:"Graders",href:"/graders",icon:l.A},{name:"Grading Queue",href:"/grading",icon:m.A},{name:"Submissions",href:"/submissions",icon:n.A},{name:"Analytics",href:"/analytics",icon:o.A},{name:"Settings",href:"/settings",icon:p.A}];function t({open:a,onToggle:b,isMobile:c}){let e=(0,h.usePathname)();return(0,d.jsxs)("aside",{className:(0,i.cn)("bg-sidebar border-r border-sidebar-border transition-all duration-300 flex flex-col relative",c?"fixed inset-y-0 left-0 z-40":"relative",c?a?"w-64":"-translate-x-full":a?"w-64":"w-20"),children:[(0,d.jsxs)("div",{className:"p-4 md:p-6 flex items-center justify-between border-b border-sidebar-border min-h-[64px] md:min-h-[72px]",children:[a&&(0,d.jsx)("h1",{className:"text-lg md:text-xl font-bold text-sidebar-foreground",children:"Cleverly"}),!c&&(0,d.jsx)("button",{onClick:b,className:(0,i.cn)("p-2 rounded-lg hover:bg-sidebar-accent text-sidebar-foreground transition-colors touch-manipulation",!a&&"mx-auto"),children:a?(0,d.jsx)(q.A,{className:"size-4"}):(0,d.jsx)(r.A,{className:"size-4"})})]}),(0,d.jsx)("nav",{className:"flex-1 px-2 md:px-3 py-4 space-y-1 overflow-y-auto",children:s.map(b=>{let f=e===b.href,h=b.icon;return(0,d.jsxs)(g(),{href:b.href,className:(0,i.cn)("flex items-center gap-3 px-3 py-3 md:py-2.5 rounded-lg text-sm font-medium transition-colors touch-manipulation",f?"bg-sidebar-primary text-sidebar-primary-foreground":"text-sidebar-foreground hover:bg-sidebar-accent active:bg-sidebar-accent",!a&&!c&&"justify-center"),title:a||c?void 0:b.name,children:[(0,d.jsx)(h,{className:"size-5 shrink-0"}),(a||c)&&(0,d.jsx)("span",{children:b.name})]},b.name)})}),(0,d.jsx)("div",{className:"p-4 border-t border-sidebar-border",children:(0,d.jsx)("div",{className:(0,i.cn)("text-xs text-sidebar-foreground/60",!a&&!c&&"text-center"),children:a||c?"v1.0.0":"v1"})})]})}var u=c(97042),v=c(32336),w=c(20833),x=c(57271),y=c(46057),z=c(78697),A=c(83765);let B={"":"Dashboard",courses:"Courses",graders:"Graders",grading:"Grading Queue",submissions:"Submissions",analytics:"Analytics",settings:"Settings"};function C(){let a=(0,h.usePathname)().split("/").filter(Boolean);return 0===a.length?(0,d.jsx)("h2",{className:"text-lg font-semibold",children:"Dashboard"}):(0,d.jsxs)("nav",{className:"flex items-center gap-2 text-sm",children:[(0,d.jsx)(g(),{href:"/",className:"text-muted-foreground hover:text-foreground transition-colors",children:"Home"}),a.map((b,c)=>{let e=`/${a.slice(0,c+1).join("/")}`,f=c===a.length-1,h=B[b]||b;return(0,d.jsxs)("div",{className:"flex items-center gap-2",children:[(0,d.jsx)(r.A,{className:"size-4 text-muted-foreground"}),f?(0,d.jsx)("span",{className:"font-medium text-foreground",children:h}):(0,d.jsx)(g(),{href:e,className:"text-muted-foreground hover:text-foreground transition-colors",children:h})]},e)})]})}function D({onMenuClick:a}){let[b,c]=(0,e.useState)(!1);return(0,d.jsxs)("header",{className:"bg-card border-b border-border px-4 md:px-6 py-3 md:py-4 flex items-center justify-between gap-2 md:gap-4 min-h-[64px]",children:[b&&(0,d.jsxs)("div",{className:"absolute inset-0 bg-card z-50 flex items-center gap-2 px-4 md:hidden",children:[(0,d.jsx)(u.A,{className:"size-5 text-muted-foreground shrink-0"}),(0,d.jsx)(A.p,{type:"search",placeholder:"Search...",autoFocus:!0,className:"flex-1 border-none focus-visible:ring-0"}),(0,d.jsx)(z.$,{variant:"ghost",size:"icon-sm",onClick:()=>c(!1),children:(0,d.jsx)(v.A,{className:"size-5"})})]}),(0,d.jsxs)("div",{className:"flex items-center gap-2 md:gap-4 flex-1 min-w-0",children:[(0,d.jsx)(z.$,{variant:"ghost",size:"icon-sm",onClick:a,className:"shrink-0 md:hidden touch-manipulation",children:(0,d.jsx)(w.A,{className:"size-5"})}),(0,d.jsx)("div",{className:"hidden sm:block min-w-0",children:(0,d.jsx)(C,{})})]}),(0,d.jsxs)("div",{className:"flex items-center gap-1 md:gap-2 shrink-0",children:[(0,d.jsxs)("div",{className:"relative hidden md:block",children:[(0,d.jsx)(u.A,{className:"absolute left-3 top-1/2 -translate-y-1/2 size-4 text-muted-foreground"}),(0,d.jsx)(A.p,{type:"search",placeholder:"Search...",className:"pl-9 w-48 lg:w-64"})]}),(0,d.jsx)(z.$,{variant:"ghost",size:"icon-sm",className:"md:hidden touch-manipulation",onClick:()=>c(!0),children:(0,d.jsx)(u.A,{className:"size-5"})}),(0,d.jsxs)(z.$,{variant:"ghost",size:"icon-sm",className:"relative touch-manipulation",children:[(0,d.jsx)(x.A,{className:"size-5"}),(0,d.jsx)("span",{className:"absolute top-1.5 right-1.5 size-2 bg-error rounded-full"})]}),(0,d.jsx)(z.$,{variant:"ghost",size:"icon-sm",className:"touch-manipulation",children:(0,d.jsx)(y.A,{className:"size-5"})})]})]})}let E=[{name:"Home",href:"/",icon:j.A},{name:"Courses",href:"/courses",icon:k.A},{name:"Grade",href:"/grading",icon:m.A},{name:"Submissions",href:"/submissions",icon:n.A},{name:"Settings",href:"/settings",icon:p.A}];function F(){let a=(0,h.usePathname)();return(0,d.jsx)("nav",{className:"fixed bottom-0 left-0 right-0 bg-card border-t border-border z-50 md:hidden safe-area-pb",children:(0,d.jsx)("div",{className:"flex items-center justify-around px-2 py-2",children:E.map(b=>{let c=a===b.href,e=b.icon;return(0,d.jsxs)(g(),{href:b.href,className:(0,i.cn)("flex flex-col items-center gap-1 px-4 py-2 rounded-lg transition-colors touch-manipulation min-w-[60px]",c?"text-primary bg-primary/10":"text-muted-foreground hover:text-foreground active:bg-accent"),children:[(0,d.jsx)(e,{className:"size-5 shrink-0"}),(0,d.jsx)("span",{className:"text-xs font-medium",children:b.name})]},b.name)})})})}function G({children:a}){let[b,c]=(0,e.useState)(!1),[f,g]=(0,e.useState)(!1);return(0,d.jsxs)("div",{className:"flex h-screen bg-background",children:[(0,d.jsx)(t,{open:b,onToggle:()=>c(!b),isMobile:f}),f&&b&&(0,d.jsx)("div",{className:"fixed inset-0 bg-black/50 z-30 md:hidden",onClick:()=>c(!1),"aria-hidden":"true"}),(0,d.jsxs)("div",{className:"flex flex-col flex-1 overflow-hidden",children:[(0,d.jsx)(D,{onMenuClick:()=>c(!b)}),(0,d.jsx)("main",{className:"flex-1 overflow-y-auto p-4 md:p-6",children:a}),f&&(0,d.jsx)(F,{})]})]})}},33873:a=>{"use strict";a.exports=require("path")},34631:a=>{"use strict";a.exports=require("tls")},36405:(a,b,c)=>{"use strict";c.r(b),c.d(b,{default:()=>d});let d=(0,c(92713).registerClientReference)(function(){throw Error("Attempted to call the default export of \"/Users/Rusumba/Oryares Sol/Cleverly/client/src/app/grading/page.tsx\" from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"/Users/Rusumba/Oryares Sol/Cleverly/client/src/app/grading/page.tsx","default")},40400:(a,b,c)=>{"use strict";c.d(b,{Me:()=>k,_o:()=>m,ul:()=>j});let d={50:"#eff6ff",100:"#dbeafe",200:"#bfdbfe",300:"#93c5fd",400:"#60a5fa",500:"#3b82f6",600:"#2563eb",700:"#1d4ed8",800:"#1e40af",900:"#1e3a8a"},e="#8b5cf6",f="#06b6d4",g="#ec4899",h="#f97316",i="#14b8a6",j=a=>a>=85?"success":a>=70?"warning":"error",k=a=>`${Math.round(a)}%`,l={Math:e,Science:f,English:g,History:h,Arts:i},m=a=>l[a]||d[600]},41025:a=>{"use strict";a.exports=require("next/dist/server/app-render/dynamic-access-async-storage.external.js")},43674:(a,b,c)=>{"use strict";c.d(b,{A:()=>d});let d=(0,c(52431).A)("List",[["path",{d:"M3 12h.01",key:"nlz23k"}],["path",{d:"M3 18h.01",key:"1tta3j"}],["path",{d:"M3 6h.01",key:"1rqtza"}],["path",{d:"M8 12h13",key:"1za7za"}],["path",{d:"M8 18h13",key:"1lx6n3"}],["path",{d:"M8 6h13",key:"ik3vkj"}]])},43954:a=>{"use strict";a.exports=require("next/dist/shared/lib/router/utils/interception-routes")},46869:(a,b,c)=>{"use strict";Object.defineProperty(b,"__esModule",{value:!0}),Object.defineProperty(b,"getImgProps",{enumerable:!0,get:function(){return i}}),c(15600);let d=c(55492),e=c(15384),f=["-moz-initial","fill","none","scale-down",void 0];function g(a){return void 0!==a.default}function h(a){return void 0===a?a:"number"==typeof a?Number.isFinite(a)?a:NaN:"string"==typeof a&&/^[0-9]+$/.test(a)?parseInt(a,10):NaN}function i({src:a,sizes:b,unoptimized:c=!1,priority:i=!1,preload:j=!1,loading:k,className:l,quality:m,width:n,height:o,fill:p=!1,style:q,overrideSrc:r,onLoad:s,onLoadingComplete:t,placeholder:u="empty",blurDataURL:v,fetchPriority:w,decoding:x="async",layout:y,objectFit:z,objectPosition:A,lazyBoundary:B,lazyRoot:C,...D},E){var F;let G,H,I,{imgConf:J,showAltText:K,blurComplete:L,defaultLoader:M}=E,N=J||e.imageConfigDefault;if("allSizes"in N)G=N;else{let a=[...N.deviceSizes,...N.imageSizes].sort((a,b)=>a-b),b=N.deviceSizes.sort((a,b)=>a-b),c=N.qualities?.sort((a,b)=>a-b);G={...N,allSizes:a,deviceSizes:b,qualities:c}}if(void 0===M)throw Object.defineProperty(Error("images.loaderFile detected but the file is missing default export.\nRead more: https://nextjs.org/docs/messages/invalid-images-config"),"__NEXT_ERROR_CODE",{value:"E163",enumerable:!1,configurable:!0});let O=D.loader||M;delete D.loader,delete D.srcSet;let P="__next_img_default"in O;if(P){if("custom"===G.loader)throw Object.defineProperty(Error(`Image with src "${a}" is missing "loader" prop.
Read more: https://nextjs.org/docs/messages/next-image-missing-loader`),"__NEXT_ERROR_CODE",{value:"E252",enumerable:!1,configurable:!0})}else{let a=O;O=b=>{let{config:c,...d}=b;return a(d)}}if(y){"fill"===y&&(p=!0);let a={intrinsic:{maxWidth:"100%",height:"auto"},responsive:{width:"100%",height:"auto"}}[y];a&&(q={...q,...a});let c={responsive:"100vw",fill:"100vw"}[y];c&&!b&&(b=c)}let Q="",R=h(n),S=h(o);if((F=a)&&"object"==typeof F&&(g(F)||void 0!==F.src)){let b=g(a)?a.default:a;if(!b.src)throw Object.defineProperty(Error(`An object should only be passed to the image component src parameter if it comes from a static image import. It must include src. Received ${JSON.stringify(b)}`),"__NEXT_ERROR_CODE",{value:"E460",enumerable:!1,configurable:!0});if(!b.height||!b.width)throw Object.defineProperty(Error(`An object should only be passed to the image component src parameter if it comes from a static image import. It must include height and width. Received ${JSON.stringify(b)}`),"__NEXT_ERROR_CODE",{value:"E48",enumerable:!1,configurable:!0});if(H=b.blurWidth,I=b.blurHeight,v=v||b.blurDataURL,Q=b.src,!p)if(R||S){if(R&&!S){let a=R/b.width;S=Math.round(b.height*a)}else if(!R&&S){let a=S/b.height;R=Math.round(b.width*a)}}else R=b.width,S=b.height}let T=!i&&!j&&("lazy"===k||void 0===k);(!(a="string"==typeof a?a:Q)||a.startsWith("data:")||a.startsWith("blob:"))&&(c=!0,T=!1),G.unoptimized&&(c=!0),P&&!G.dangerouslyAllowSVG&&a.split("?",1)[0].endsWith(".svg")&&(c=!0);let U=h(m),V=Object.assign(p?{position:"absolute",height:"100%",width:"100%",left:0,top:0,right:0,bottom:0,objectFit:z,objectPosition:A}:{},K?{}:{color:"transparent"},q),W=L||"empty"===u?null:"blur"===u?`url("data:image/svg+xml;charset=utf-8,${(0,d.getImageBlurSvg)({widthInt:R,heightInt:S,blurWidth:H,blurHeight:I,blurDataURL:v||"",objectFit:V.objectFit})}")`:`url("${u}")`,X=f.includes(V.objectFit)?"fill"===V.objectFit?"100% 100%":"cover":V.objectFit,Y=W?{backgroundSize:X,backgroundPosition:V.objectPosition||"50% 50%",backgroundRepeat:"no-repeat",backgroundImage:W}:{},Z=function({config:a,src:b,unoptimized:c,width:d,quality:e,sizes:f,loader:g}){if(c)return{src:b,srcSet:void 0,sizes:void 0};let{widths:h,kind:i}=function({deviceSizes:a,allSizes:b},c,d){if(d){let c=/(^|\s)(1?\d?\d)vw/g,e=[];for(let a;a=c.exec(d);)e.push(parseInt(a[2]));if(e.length){let c=.01*Math.min(...e);return{widths:b.filter(b=>b>=a[0]*c),kind:"w"}}return{widths:b,kind:"w"}}return"number"!=typeof c?{widths:a,kind:"w"}:{widths:[...new Set([c,2*c].map(a=>b.find(b=>b>=a)||b[b.length-1]))],kind:"x"}}(a,d,f),j=h.length-1;return{sizes:f||"w"!==i?f:"100vw",srcSet:h.map((c,d)=>`${g({config:a,src:b,quality:e,width:c})} ${"w"===i?c:d+1}${i}`).join(", "),src:g({config:a,src:b,quality:e,width:h[j]})}}({config:G,src:a,unoptimized:c,width:R,quality:U,sizes:b,loader:O}),$=T?"lazy":k;return{props:{...D,loading:$,fetchPriority:w,width:R,height:S,decoding:x,className:l,style:{...V,...Y},sizes:Z.sizes,srcSet:Z.srcSet,src:r||Z.src},meta:{unoptimized:c,preload:j||i,placeholder:u,fill:p}}}},49734:(a,b,c)=>{Promise.resolve().then(c.bind(c,36405))},53677:(a,b,c)=>{"use strict";c.r(b),c.d(b,{default:()=>D});var d=c(26835),e=c(53830),f=c(29733),g=c(63079),h=c(51570),i=c(46057);function j({submissions:a,selectedId:b,onSelect:c}){return(0,d.jsx)("div",{className:"space-y-2 overflow-y-auto flex-1",children:a.map(a=>(0,d.jsx)("div",{onClick:()=>c(a.id),className:(0,h.cn)("p-4 rounded-lg border cursor-pointer transition-all hover:shadow-md",b===a.id?"bg-primary/10 border-primary shadow-sm":"bg-card border-border hover:border-primary/50"),children:(0,d.jsxs)("div",{className:"flex items-start gap-3",children:[(0,d.jsx)("div",{className:"p-2 bg-muted rounded-full",children:(0,d.jsx)(i.A,{className:"size-4"})}),(0,d.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,d.jsx)("div",{className:"font-medium text-sm mb-1 truncate",children:a.student}),(0,d.jsxs)("div",{className:"text-xs text-muted-foreground mb-2",children:[a.questionsGraded,"/",a.totalQuestions," questions reviewed"]}),(0,d.jsx)(g._,{score:a.confidence,size:"sm"})]})]})},a.id))})}var k=c(6647),l=c(78697),m=c(83765),n=c(57087),o=c(68600),p=c(52431);let q=(0,p.A)("Flag",[["path",{d:"M4 15s1-1 4-1 5 2 8 2 4-1 4-1V3s-1 1-4 1-5-2-8-2-4 1-4 1z",key:"i9b6wo"}],["line",{x1:"4",x2:"4",y1:"22",y2:"15",key:"1cm3nv"}]]);var r=c(38037),s=c(57132);let t=(0,p.A)("ZoomIn",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["line",{x1:"21",x2:"16.65",y1:"21",y2:"16.65",key:"13gj7c"}],["line",{x1:"11",x2:"11",y1:"8",y2:"14",key:"1vmskp"}],["line",{x1:"8",x2:"14",y1:"11",y2:"11",key:"durymu"}]]),u=(0,p.A)("ZoomOut",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["line",{x1:"21",x2:"16.65",y1:"21",y2:"16.65",key:"13gj7c"}],["line",{x1:"8",x2:"14",y1:"11",y2:"11",key:"durymu"}]]);var v=c(93068),w=c(98289),x=c(15481),y=c.n(x);function z({question:a,onNext:b,onPrevious:c}){let[f,i]=(0,e.useState)(a.aiScore),[j,p]=(0,e.useState)(a.aiFeedback),[x,z]=(0,e.useState)(a.rubricChecks),[A,B]=(0,e.useState)(100);return(0,d.jsxs)("div",{className:"space-y-3 md:space-y-4",children:[(0,d.jsxs)("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-3",children:[(0,d.jsxs)("div",{className:"flex flex-wrap items-center gap-2 md:gap-4",children:[(0,d.jsxs)(o.E,{variant:"outline",className:"text-sm md:text-base",children:["Question ",a.questionNumber," of ",a.totalQuestions]}),(0,d.jsx)(g._,{score:a.confidence})]}),(0,d.jsxs)("div",{className:"flex items-center gap-2",children:[(0,d.jsxs)(l.$,{variant:"outline",size:"sm",className:"gap-2 bg-transparent touch-manipulation",children:[(0,d.jsx)(q,{className:"size-4"}),(0,d.jsx)("span",{className:"hidden sm:inline",children:"Flag for Review"}),(0,d.jsx)("span",{className:"sm:hidden",children:"Flag"})]}),(0,d.jsx)(l.$,{variant:"outline",size:"icon-sm",onClick:c,disabled:1===a.questionNumber,className:"touch-manipulation bg-transparent",children:(0,d.jsx)(r.A,{className:"size-4"})}),(0,d.jsx)(l.$,{variant:"outline",size:"icon-sm",onClick:b,disabled:a.questionNumber===a.totalQuestions,className:"touch-manipulation bg-transparent",children:(0,d.jsx)(s.A,{className:"size-4"})})]})]}),(0,d.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-3 md:gap-4",children:[(0,d.jsxs)(k.Zp,{children:[(0,d.jsx)(k.aR,{children:(0,d.jsx)(k.ZB,{className:"text-base md:text-lg",children:"Student Answer"})}),(0,d.jsxs)(k.Wu,{className:"space-y-3 md:space-y-4",children:[(0,d.jsxs)("div",{className:"relative bg-muted rounded-lg overflow-hidden",children:[(0,d.jsx)(y(),{src:a.studentAnswerImage||"/placeholder.svg",alt:"Student's handwritten answer",width:600,height:400,className:"w-full",style:{transform:`scale(${A/100})`,transformOrigin:"top left"}}),(0,d.jsxs)("div",{className:"absolute top-2 right-2 flex gap-1",children:[(0,d.jsx)(l.$,{variant:"secondary",size:"icon-sm",onClick:()=>B(Math.min(200,A+25)),className:"touch-manipulation",children:(0,d.jsx)(t,{className:"size-4"})}),(0,d.jsx)(l.$,{variant:"secondary",size:"icon-sm",onClick:()=>B(Math.max(50,A-25)),className:"touch-manipulation",children:(0,d.jsx)(u,{className:"size-4"})})]})]}),(0,d.jsxs)("div",{children:[(0,d.jsxs)("div",{className:"text-sm font-medium mb-2 flex items-center gap-2",children:["AI Extracted Text",(0,d.jsx)(o.E,{variant:"success",className:"text-xs",children:"High OCR Quality"})]}),(0,d.jsx)("div",{className:"p-3 bg-muted rounded-lg text-xs md:text-sm leading-relaxed max-h-[200px] overflow-y-auto",children:a.extractedText})]})]})]}),(0,d.jsxs)("div",{className:"space-y-3 md:space-y-4",children:[(0,d.jsxs)(k.Zp,{children:[(0,d.jsx)(k.aR,{children:(0,d.jsx)(k.ZB,{className:"text-base md:text-lg",children:"Question"})}),(0,d.jsx)(k.Wu,{children:(0,d.jsx)("p",{className:"text-xs md:text-sm leading-relaxed",children:a.questionText})})]}),(0,d.jsxs)(k.Zp,{children:[(0,d.jsx)(k.aR,{children:(0,d.jsx)(k.ZB,{className:"text-base md:text-lg",children:"Rubric Criteria"})}),(0,d.jsx)(k.Wu,{children:(0,d.jsx)("div",{className:"space-y-2 md:space-y-3",children:x.map((a,b)=>(0,d.jsxs)("div",{onClick:()=>{let a;(a=[...x])[b].checked=!a[b].checked,z(a),i(a.reduce((a,b)=>a+(b.checked?b.points:0),0))},className:(0,h.cn)("flex items-start gap-2 md:gap-3 p-2 md:p-3 rounded-lg border cursor-pointer transition-colors touch-manipulation",a.checked?"bg-green-50 dark:bg-green-950 border-green-200 dark:border-green-800":"bg-background border-border hover:border-primary/50 active:border-primary"),children:[(0,d.jsx)("div",{className:"mt-0.5 shrink-0",children:a.checked?(0,d.jsx)(v.A,{className:"size-4 md:size-5 text-green-600"}):(0,d.jsx)("div",{className:"size-4 md:size-5 rounded-full border-2 border-gray-300"})}),(0,d.jsx)("div",{className:"flex-1 min-w-0",children:(0,d.jsx)("div",{className:"text-xs md:text-sm",children:a.criterion})}),(0,d.jsxs)("div",{className:"font-mono text-xs md:text-sm font-semibold shrink-0",children:[a.points," pts"]})]},b))})})]}),(0,d.jsxs)(k.Zp,{children:[(0,d.jsx)(k.aR,{children:(0,d.jsx)(k.ZB,{className:"text-base md:text-lg",children:"Score"})}),(0,d.jsx)(k.Wu,{children:(0,d.jsxs)("div",{className:"flex items-center gap-3 md:gap-4",children:[(0,d.jsx)(m.p,{type:"number",value:f,onChange:a=>i(Number(a.target.value)),className:"w-20 md:w-24 text-center text-xl md:text-2xl font-bold",min:"0",max:a.maxScore}),(0,d.jsxs)("div",{className:"text-xl md:text-2xl font-bold text-muted-foreground",children:["/ ",a.maxScore]}),(0,d.jsx)("div",{className:"flex-1 text-right",children:(0,d.jsxs)("div",{className:"text-2xl md:text-3xl font-bold text-primary",children:[Math.round(f/a.maxScore*100),"%"]})})]})})]}),(0,d.jsxs)(k.Zp,{children:[(0,d.jsx)(k.aR,{children:(0,d.jsx)(k.ZB,{className:"text-base md:text-lg",children:"Feedback"})}),(0,d.jsx)(k.Wu,{children:(0,d.jsx)(n.T,{value:j,onChange:a=>p(a.target.value),placeholder:"Provide feedback for the student...",rows:4,className:"text-sm resize-none"})})]}),(0,d.jsxs)("div",{className:"flex flex-col sm:flex-row gap-2 md:gap-3",children:[(0,d.jsxs)(l.$,{variant:"outline",className:"flex-1 gap-2 bg-transparent touch-manipulation",children:[(0,d.jsx)(w.A,{className:"size-4"}),(0,d.jsx)("span",{className:"hidden sm:inline",children:"Override Score"}),(0,d.jsx)("span",{className:"sm:hidden",children:"Override"})]}),(0,d.jsxs)(l.$,{className:"flex-1 gap-2 touch-manipulation",children:[(0,d.jsx)(v.A,{className:"size-4"}),(0,d.jsx)("span",{className:"hidden sm:inline",children:"Approve & Next"}),(0,d.jsx)("span",{className:"sm:hidden",children:"Approve"})]})]})]})]})]})}var A=c(43674);let B=[{id:"1",student:"Alice Johnson",course:"Chemistry Test 3",questionsGraded:3,totalQuestions:5,confidence:94,status:"in-progress"},{id:"2",student:"Bob Smith",course:"Chemistry Test 3",questionsGraded:5,totalQuestions:5,confidence:68,status:"review"},{id:"3",student:"Carol White",course:"Chemistry Test 3",questionsGraded:5,totalQuestions:5,confidence:89,status:"completed"}],C={questionNumber:1,totalQuestions:5,questionText:"Describe the process of photosynthesis and its importance to plant life.",studentAnswerImage:"/handwritten-essay-answer.jpg",extractedText:"Photosynthesis is the process where plants convert light energy into chemical energy. It occurs in chloroplasts containing chlorophyll. The process has two stages: light reactions and dark reactions. During light reactions, water molecules split and oxygen is released. In dark reactions, carbon dioxide combines with hydrogen to form glucose. This process is essential for plant growth and provides oxygen for other organisms.",aiScore:8,maxScore:10,confidence:87,rubricChecks:[{criterion:"Identifies chloroplasts and chlorophyll",checked:!0,points:3},{criterion:"Explains light and dark reactions",checked:!0,points:4},{criterion:"Discusses glucose production",checked:!1,points:3}],aiFeedback:"Good explanation of the basic photosynthesis process. Student correctly identified chloroplasts and described both light and dark reactions. However, the discussion of glucose production could be more detailed, specifically mentioning where it occurs in the Calvin cycle."};function D(){let[a,b]=(0,e.useState)("1"),[c,g]=(0,e.useState)(30),[h,i]=(0,e.useState)(!1),[k,m]=(0,e.useState)(!1);return(0,d.jsx)(f.e,{children:(0,d.jsx)("div",{className:"pb-20 md:pb-0",children:h?(0,d.jsxs)("div",{className:"space-y-4",children:[(0,d.jsxs)("div",{className:"flex items-center justify-between",children:[(0,d.jsx)("h2",{className:"text-xl font-semibold",children:"Grading Queue"}),(0,d.jsxs)(l.$,{variant:"outline",size:"sm",onClick:()=>m(!k),className:"gap-2 touch-manipulation",children:[(0,d.jsx)(A.A,{className:"size-4"}),k?"Hide":"Show"," Queue"]})]}),k&&(0,d.jsxs)("div",{className:"space-y-3",children:[(0,d.jsxs)("div",{className:"flex flex-wrap gap-2",children:[(0,d.jsx)(o.E,{variant:"outline",className:"cursor-pointer touch-manipulation",children:"All (12)"}),(0,d.jsx)(o.E,{variant:"warning",className:"cursor-pointer touch-manipulation",children:"Review (3)"}),(0,d.jsx)(o.E,{variant:"success",className:"cursor-pointer touch-manipulation",children:"Done (9)"})]}),(0,d.jsx)("div",{className:"max-h-[300px] overflow-y-auto",children:(0,d.jsx)(j,{submissions:B,selectedId:a,onSelect:a=>{b(a),m(!1)}})})]}),(0,d.jsx)(z,{question:C,onNext:()=>{},onPrevious:()=>{}})]}):(0,d.jsxs)("div",{className:"flex h-[calc(100vh-8rem)] gap-4",children:[(0,d.jsx)("div",{className:"transition-all duration-300 overflow-hidden",style:{width:`${c}%`,minWidth:c<15?"60px":"280px"},children:(0,d.jsxs)("div",{className:"h-full flex flex-col",children:[(0,d.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[c>=15&&(0,d.jsx)("h2",{className:"text-xl font-semibold",children:"Submissions Queue"}),(0,d.jsx)(l.$,{variant:"ghost",size:"icon-sm",onClick:()=>g(c<15?30:10),children:c<15?(0,d.jsx)(s.A,{className:"size-4"}):(0,d.jsx)(r.A,{className:"size-4"})})]}),c>=15&&(0,d.jsxs)(d.Fragment,{children:[(0,d.jsxs)("div",{className:"flex gap-2 mb-4",children:[(0,d.jsx)(o.E,{variant:"outline",className:"cursor-pointer",children:"All (12)"}),(0,d.jsx)(o.E,{variant:"warning",className:"cursor-pointer",children:"Review (3)"}),(0,d.jsx)(o.E,{variant:"success",className:"cursor-pointer",children:"Done (9)"})]}),(0,d.jsx)(j,{submissions:B,selectedId:a,onSelect:b})]})]})}),(0,d.jsx)("div",{className:"flex-1 overflow-auto",children:(0,d.jsx)(z,{question:C,onNext:()=>{},onPrevious:()=>{}})})]})})})}},55492:(a,b)=>{"use strict";function c({widthInt:a,heightInt:b,blurWidth:c,blurHeight:d,blurDataURL:e,objectFit:f}){let g=c?40*c:a,h=d?40*d:b,i=g&&h?`viewBox='0 0 ${g} ${h}'`:"";return`%3Csvg xmlns='http://www.w3.org/2000/svg' ${i}%3E%3Cfilter id='b' color-interpolation-filters='sRGB'%3E%3CfeGaussianBlur stdDeviation='20'/%3E%3CfeColorMatrix values='1 0 0 0 0 0 1 0 0 0 0 0 1 0 0 0 0 0 100 -1' result='s'/%3E%3CfeFlood x='0' y='0' width='100%25' height='100%25'/%3E%3CfeComposite operator='out' in='s'/%3E%3CfeComposite in2='SourceGraphic'/%3E%3CfeGaussianBlur stdDeviation='20'/%3E%3C/filter%3E%3Cimage width='100%25' height='100%25' x='0' y='0' preserveAspectRatio='${i?"none":"contain"===f?"xMidYMid":"cover"===f?"xMidYMid slice":"none"}' style='filter: url(%23b);' href='${e}'/%3E%3C/svg%3E`}Object.defineProperty(b,"__esModule",{value:!0}),Object.defineProperty(b,"getImageBlurSvg",{enumerable:!0,get:function(){return c}})},55511:a=>{"use strict";a.exports=require("crypto")},55591:a=>{"use strict";a.exports=require("https")},57087:(a,b,c)=>{"use strict";c.d(b,{T:()=>f});var d=c(26835);c(53830);var e=c(51570);function f({className:a,...b}){return(0,d.jsx)("textarea",{"data-slot":"textarea",className:(0,e.cn)("border-input placeholder:text-muted-foreground focus-visible:border-ring focus-visible:ring-ring/50 aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive dark:bg-input/30 flex field-sizing-content min-h-16 w-full rounded-md border bg-transparent px-3 py-2 text-base shadow-xs transition-[color,box-shadow] outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",a),...b})}},57284:(a,b,c)=>{"use strict";Object.defineProperty(b,"__esModule",{value:!0});var d={default:function(){return p},defaultHead:function(){return l}};for(var e in d)Object.defineProperty(b,e,{enumerable:!0,get:d[e]});let f=c(11966),g=c(40713),h=c(26835),i=g._(c(53830)),j=f._(c(95287)),k=c(95845);function l(){return[(0,h.jsx)("meta",{charSet:"utf-8"},"charset"),(0,h.jsx)("meta",{name:"viewport",content:"width=device-width"},"viewport")]}function m(a,b){return"string"==typeof b||"number"==typeof b?a:b.type===i.default.Fragment?a.concat(i.default.Children.toArray(b.props.children).reduce((a,b)=>"string"==typeof b||"number"==typeof b?a:a.concat(b),[])):a.concat(b)}c(15600);let n=["name","httpEquiv","charSet","itemProp"];function o(a){let b,c,d,e;return a.reduce(m,[]).reverse().concat(l().reverse()).filter((b=new Set,c=new Set,d=new Set,e={},a=>{let f=!0,g=!1;if(a.key&&"number"!=typeof a.key&&a.key.indexOf("$")>0){g=!0;let c=a.key.slice(a.key.indexOf("$")+1);b.has(c)?f=!1:b.add(c)}switch(a.type){case"title":case"base":c.has(a.type)?f=!1:c.add(a.type);break;case"meta":for(let b=0,c=n.length;b<c;b++){let c=n[b];if(a.props.hasOwnProperty(c))if("charSet"===c)d.has(c)?f=!1:d.add(c);else{let b=a.props[c],d=e[c]||new Set;("name"!==c||!g)&&d.has(b)?f=!1:(d.add(b),e[c]=d)}}}return f})).reverse().map((a,b)=>{let c=a.key||b;return i.default.cloneElement(a,{key:c})})}let p=function({children:a}){let b=(0,i.useContext)(k.HeadManagerContext);return(0,h.jsx)(j.default,{reduceComponentsToState:o,headManager:b,children:a})};("function"==typeof b.default||"object"==typeof b.default&&null!==b.default)&&void 0===b.default.__esModule&&(Object.defineProperty(b.default,"__esModule",{value:!0}),Object.assign(b.default,b),a.exports=b.default)},63033:a=>{"use strict";a.exports=require("next/dist/server/app-render/work-unit-async-storage.external.js")},63079:(a,b,c)=>{"use strict";c.d(b,{_:()=>h});var d=c(26835),e=c(40400),f=c(51570),g=c(68600);function h({score:a,showLabel:b=!0,size:c="md",className:h}){let i=(0,e.ul)(a);return(0,d.jsxs)("div",{className:(0,f.cn)("flex items-center gap-2",h),children:[b&&(0,d.jsx)(g.E,{variant:i,className:"font-mono text-xs",children:(0,e.Me)(a)}),(0,d.jsx)("div",{className:"flex-1 bg-gray-200 dark:bg-gray-700 rounded-full overflow-hidden min-w-20",children:(0,d.jsx)("div",{className:(0,f.cn)("transition-all duration-300",{sm:"h-1.5",md:"h-2",lg:"h-3"}[c],{"bg-green-500":a>=85,"bg-yellow-500":a>=70&&a<85,"bg-red-500":a<70}),style:{width:`${Math.min(a,100)}%`}})})]})}},63824:(a,b,c)=>{"use strict";a.exports=c(87173).vendored.contexts.RouterContext},64211:(a,b,c)=>{"use strict";a.exports=c(87173).vendored.contexts.ImageConfigContext},70722:a=>{"use strict";a.exports=require("next/dist/shared/lib/invariant-error")},73496:a=>{"use strict";a.exports=require("http2")},74075:a=>{"use strict";a.exports=require("zlib")},79428:a=>{"use strict";a.exports=require("buffer")},79551:a=>{"use strict";a.exports=require("url")},79646:a=>{"use strict";a.exports=require("child_process")},81630:a=>{"use strict";a.exports=require("http")},83997:a=>{"use strict";a.exports=require("tty")},86439:a=>{"use strict";a.exports=require("next/dist/shared/lib/no-fallback-error.external")},91645:a=>{"use strict";a.exports=require("net")},94735:a=>{"use strict";a.exports=require("events")},95287:(a,b,c)=>{"use strict";Object.defineProperty(b,"__esModule",{value:!0}),Object.defineProperty(b,"default",{enumerable:!0,get:function(){return f}});let d=c(53830),e=()=>{};function f(a){let{headManager:b,reduceComponentsToState:c}=a;function f(){if(b&&b.mountedInstances){let a=d.Children.toArray(Array.from(b.mountedInstances).filter(Boolean));b.updateHead(c(a))}}return b?.mountedInstances?.add(a.children),f(),e(()=>(b?.mountedInstances?.add(a.children),()=>{b?.mountedInstances?.delete(a.children)})),e(()=>(b&&(b._pendingUpdate=f),()=>{b&&(b._pendingUpdate=f)})),null}},95845:(a,b,c)=>{"use strict";a.exports=c(87173).vendored.contexts.HeadManagerContext},97535:(a,b)=>{"use strict";function c(a,b){let c=a||75;return b?.qualities?.length?b.qualities.reduce((a,b)=>Math.abs(b-c)<Math.abs(a-c)?b:a,0):c}Object.defineProperty(b,"__esModule",{value:!0}),Object.defineProperty(b,"findClosestQuality",{enumerable:!0,get:function(){return c}})},99963:(a,b,c)=>{"use strict";c.r(b),c.d(b,{GlobalError:()=>D.a,__next_app__:()=>L,handler:()=>N,routeModule:()=>M});var d=c(31975),e=c(30600),f=c(66116),g=c(27321),h=c(42431),i=c(34935),j=c(57326),k=c(63459),l=c(8555),m=c(67401),n=c(75869),o=c(50266),p=c(44612),q=c(14661),r=c(261),s=c(14220),t=c(37353),u=c(26713),v=c(99509),w=c(31310),x=c(85426),y=c(80463),z=c(83665),A=c(62091),B=c(86439),C=c(75765),D=c.n(C),E=c(18045),F=c(71860),G=c(70722),H=c(19995),I=c(43954),J={};for(let a in E)0>["default","GlobalError","__next_app__","routeModule","handler"].indexOf(a)&&(J[a]=()=>E[a]);c.d(b,J);let K={children:["",{children:["grading",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(c.bind(c,36405)),"/Users/Rusumba/Oryares Sol/Cleverly/client/src/app/grading/page.tsx"]}]},{}]},{layout:[()=>Promise.resolve().then(c.bind(c,86893)),"/Users/Rusumba/Oryares Sol/Cleverly/client/src/app/layout.tsx"],"global-error":[()=>Promise.resolve().then(c.t.bind(c,75765,23)),"next/dist/client/components/builtin/global-error.js"],"not-found":[()=>Promise.resolve().then(c.t.bind(c,13729,23)),"next/dist/client/components/builtin/not-found.js"],forbidden:[()=>Promise.resolve().then(c.t.bind(c,53532,23)),"next/dist/client/components/builtin/forbidden.js"],unauthorized:[()=>Promise.resolve().then(c.t.bind(c,4175,23)),"next/dist/client/components/builtin/unauthorized.js"]}]}.children,L={require:c,loadChunk:()=>Promise.resolve()},M=new d.AppPageRouteModule({definition:{kind:e.RouteKind.APP_PAGE,page:"/grading/page",pathname:"/grading",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:K},distDir:".next",relativeProjectDir:""});async function N(a,b,d){var C;M.isDev&&(0,h.addRequestMeta)(a,"devRequestTimingInternalsEnd",process.hrtime.bigint());let J="/grading/page";"/index"===J&&(J="/");let O=!!(0,h.getRequestMeta)(a,"minimalMode"),P=await M.prepare(a,b,{srcPage:J,multiZoneDraftMode:!1});if(!P)return b.statusCode=400,b.end("Bad Request"),null==d.waitUntil||d.waitUntil.call(d,Promise.resolve()),null;let{buildId:Q,query:R,params:S,pageIsDynamic:T,buildManifest:U,nextFontManifest:V,reactLoadableManifest:W,serverActionsManifest:X,clientReferenceManifest:Y,subresourceIntegrityManifest:Z,prerenderManifest:$,isDraftMode:_,resolvedPathname:aa,revalidateOnlyGenerated:ab,routerServerContext:ac,nextConfig:ad,parsedUrl:ae,interceptionRoutePatterns:af}=P,ag=(0,r.normalizeAppPath)(J),{isOnDemandRevalidate:ah}=P,ai=ad.experimental.ppr&&!ad.cacheComponents&&(0,I.isInterceptionRouteAppPath)(aa)?null:M.match(aa,$),aj=!!$.routes[aa],ak=a.headers["user-agent"]||"",al=(0,u.getBotType)(ak),am=(0,p.isHtmlBotRequest)(a),an=(0,h.getRequestMeta)(a,"isPrefetchRSCRequest")??"1"===a.headers[t.NEXT_ROUTER_PREFETCH_HEADER],ao=(0,h.getRequestMeta)(a,"isRSCRequest")??!!a.headers[t.RSC_HEADER],ap=(0,s.getIsPossibleServerAction)(a),aq=(0,m.checkIsAppPPREnabled)(ad.experimental.ppr)&&(null==(C=$.routes[ag]??$.dynamicRoutes[ag])?void 0:C.renderingMode)==="PARTIALLY_STATIC",ar=!1,as=!1,at=aq?(0,h.getRequestMeta)(a,"postponed"):void 0,au=aq&&ao&&!an;O&&(au=au&&!!at);let av=(0,h.getRequestMeta)(a,"segmentPrefetchRSCRequest"),aw=(!am||!aq)&&(!ak||(0,p.shouldServeStreamingMetadata)(ak,ad.htmlLimitedBots)),ax=!!((ai||aj||$.routes[ag])&&!(am&&aq)),ay=aq&&!0===ad.cacheComponents,az=!0===M.isDev||!ax||"string"==typeof at||(ay&&(0,h.getRequestMeta)(a,"onCacheEntryV2")?au&&!O:au),aA=am&&aq,aB=null;_||!ax||az||ap||at||au||(aB=aa);let aC=aB;!aC&&M.isDev&&(aC=aa),M.isDev||_||!ax||!ao||au||(0,k.d)(a.headers);let aD={...E,tree:K,GlobalError:D(),handler:N,routeModule:M,__next_app__:L};X&&Y&&(0,o.setReferenceManifestsSingleton)({page:J,clientReferenceManifest:Y,serverActionsManifest:X,serverModuleMap:(0,q.createServerModuleMap)({serverActionsManifest:X})});let aE=a.method||"GET",aF=(0,g.getTracer)(),aG=aF.getActiveScopeSpan(),aH=async()=>((null==ac?void 0:ac.render404)?await ac.render404(a,b,ae,!1):b.end("This page could not be found"),null);try{let f=M.getVaryHeader(aa,af);b.setHeader("Vary",f);let k=async(c,d)=>{let e=new l.NodeNextRequest(a),f=new l.NodeNextResponse(b);return M.render(e,f,d).finally(()=>{if(!c)return;c.setAttributes({"http.status_code":b.statusCode,"next.rsc":!1});let a=aF.getRootSpanAttributes();if(!a)return;if(a.get("next.span_type")!==i.BaseServerSpan.handleRequest)return void console.warn(`Unexpected root span type '${a.get("next.span_type")}'. Please report this Next.js issue https://github.com/vercel/next.js`);let d=a.get("next.route");if(d){let a=`${aE} ${d}`;c.setAttributes({"next.route":d,"http.route":d,"next.span_name":a}),c.updateName(a)}else c.updateName(`${aE} ${J}`)})},m=(0,h.getRequestMeta)(a,"incrementalCache"),o=async({span:e,postponed:f,fallbackRouteParams:g,forceStaticRender:i})=>{let l={query:R,params:S,page:ag,sharedContext:{buildId:Q},serverComponentsHmrCache:(0,h.getRequestMeta)(a,"serverComponentsHmrCache"),fallbackRouteParams:g,renderOpts:{App:()=>null,Document:()=>null,pageConfig:{},ComponentMod:aD,Component:(0,j.T)(aD),params:S,routeModule:M,page:J,postponed:f,shouldWaitOnAllReady:aA,serveStreamingMetadata:aw,supportsDynamicResponse:"string"==typeof f||az,buildManifest:U,nextFontManifest:V,reactLoadableManifest:W,subresourceIntegrityManifest:Z,serverActionsManifest:X,clientReferenceManifest:Y,setCacheStatus:null==ac?void 0:ac.setCacheStatus,setIsrStatus:null==ac?void 0:ac.setIsrStatus,setReactDebugChannel:null==ac?void 0:ac.setReactDebugChannel,dir:c(33873).join(process.cwd(),M.relativeProjectDir),isDraftMode:_,botType:al,isOnDemandRevalidate:ah,isPossibleServerAction:ap,assetPrefix:ad.assetPrefix,nextConfigOutput:ad.output,crossOrigin:ad.crossOrigin,trailingSlash:ad.trailingSlash,images:ad.images,previewProps:$.preview,deploymentId:ad.deploymentId,enableTainting:ad.experimental.taint,htmlLimitedBots:ad.htmlLimitedBots,reactMaxHeadersLength:ad.reactMaxHeadersLength,multiZoneDraftMode:!1,incrementalCache:m,cacheLifeProfiles:ad.cacheLife,basePath:ad.basePath,serverActions:ad.experimental.serverActions,...ar||as?{nextExport:!0,supportsDynamicResponse:!1,isStaticGeneration:!0,isDebugDynamicAccesses:ar}:{},cacheComponents:!!ad.cacheComponents,experimental:{isRoutePPREnabled:aq,expireTime:ad.expireTime,staleTimes:ad.experimental.staleTimes,dynamicOnHover:!!ad.experimental.dynamicOnHover,inlineCss:!!ad.experimental.inlineCss,authInterrupts:!!ad.experimental.authInterrupts,clientTraceMetadata:ad.experimental.clientTraceMetadata||[],clientParamParsingOrigins:ad.experimental.clientParamParsingOrigins},waitUntil:d.waitUntil,onClose:a=>{b.on("close",a)},onAfterTaskError:()=>{},onInstrumentationRequestError:(b,c,d)=>M.onRequestError(a,b,d,ac),err:(0,h.getRequestMeta)(a,"invokeError"),dev:M.isDev}};ar&&(l.renderOpts.nextExport=!0,l.renderOpts.supportsDynamicResponse=!1,l.renderOpts.isDebugDynamicAccesses=ar),i&&(l.renderOpts.supportsDynamicResponse=!1);let n=await k(e,l),{metadata:o}=n,{cacheControl:p,headers:q={},fetchTags:r,fetchMetrics:s}=o;if(r&&(q[y.NEXT_CACHE_TAGS_HEADER]=r),a.fetchMetrics=s,ax&&(null==p?void 0:p.revalidate)===0&&!M.isDev&&!aq){let a=o.staticBailoutInfo,b=Object.defineProperty(Error(`Page changed from static to dynamic at runtime ${aa}${(null==a?void 0:a.description)?`, reason: ${a.description}`:""}
see more here https://nextjs.org/docs/messages/app-static-to-dynamic-error`),"__NEXT_ERROR_CODE",{value:"E132",enumerable:!1,configurable:!0});if(null==a?void 0:a.stack){let c=a.stack;b.stack=b.message+c.substring(c.indexOf("\n"))}throw b}return{value:{kind:v.CachedRouteKind.APP_PAGE,html:n,headers:q,rscData:o.flightData,postponed:o.postponed,status:o.statusCode,segmentData:o.segmentData},cacheControl:p}},p=async({hasResolved:c,previousCacheEntry:f,isRevalidating:g,span:i,forceStaticRender:j=!1})=>{let k,l=!1===M.isDev,q=c||b.writableEnded;if(ah&&ab&&!f&&!O)return(null==ac?void 0:ac.render404)?await ac.render404(a,b):(b.statusCode=404,b.end("This page could not be found")),null;if(ai&&(k=(0,w.parseFallbackField)(ai.fallback)),k===w.FallbackMode.PRERENDER&&(0,u.isBot)(ak)&&(!aq||am)&&(k=w.FallbackMode.BLOCKING_STATIC_RENDER),(null==f?void 0:f.isStale)===-1&&(ah=!0),ah&&(k!==w.FallbackMode.NOT_FOUND||f)&&(k=w.FallbackMode.BLOCKING_STATIC_RENDER),!O&&k!==w.FallbackMode.BLOCKING_STATIC_RENDER&&aC&&!q&&!_&&T&&(l||!aj)){if((l||ai)&&k===w.FallbackMode.NOT_FOUND){if(ad.experimental.adapterPath)return await aH();throw new B.NoFallbackError}if(aq&&(ad.cacheComponents?!au:!ao)){let b=l&&"string"==typeof(null==ai?void 0:ai.fallback)?ai.fallback:ag,c=l&&(null==ai?void 0:ai.fallbackRouteParams)?(0,n.createOpaqueFallbackRouteParams)(ai.fallbackRouteParams):as?(0,n.getFallbackRouteParams)(ag,M):null,f=await M.handleResponse({cacheKey:b,req:a,nextConfig:ad,routeKind:e.RouteKind.APP_PAGE,isFallback:!0,prerenderManifest:$,isRoutePPREnabled:aq,responseGenerator:async()=>o({span:i,postponed:void 0,fallbackRouteParams:c,forceStaticRender:!1}),waitUntil:d.waitUntil,isMinimalMode:O});if(null===f)return null;if(f)return delete f.cacheControl,f}}let r=ah||g||!at?void 0:at;if(ay&&!O&&m&&au&&!j){let b=await m.get(aa,{kind:v.IncrementalCacheKind.APP_PAGE,isRoutePPREnabled:!0,isFallback:!1});b&&b.value&&b.value.kind===v.CachedRouteKind.APP_PAGE&&(r=b.value.postponed,b&&(-1===b.isStale||!0===b.isStale)&&(0,H.scheduleOnNextTick)(async()=>{let b=M.getResponseCache(a);try{await b.revalidate(aa,m,aq,!1,a=>p({...a,forceStaticRender:!0}),null,c,d.waitUntil)}catch(a){console.error("Error revalidating the page in the background",a)}}))}if(ar&&void 0!==r)return{cacheControl:{revalidate:1,expire:void 0},value:{kind:v.CachedRouteKind.PAGES,html:x.default.EMPTY,pageData:{},headers:void 0,status:void 0}};let s=l&&(null==ai?void 0:ai.fallbackRouteParams)&&(0,h.getRequestMeta)(a,"renderFallbackShell")?(0,n.createOpaqueFallbackRouteParams)(ai.fallbackRouteParams):as?(0,n.getFallbackRouteParams)(ag,M):null;return o({span:i,postponed:r,fallbackRouteParams:s,forceStaticRender:j})},q=async c=>{var f,g,i,j,k;let l,m=await M.handleResponse({cacheKey:aB,responseGenerator:a=>p({span:c,...a}),routeKind:e.RouteKind.APP_PAGE,isOnDemandRevalidate:ah,isRoutePPREnabled:aq,req:a,nextConfig:ad,prerenderManifest:$,waitUntil:d.waitUntil,isMinimalMode:O});if(_&&b.setHeader("Cache-Control","private, no-cache, no-store, max-age=0, must-revalidate"),M.isDev&&b.setHeader("Cache-Control","no-store, must-revalidate"),!m){if(aB)throw Object.defineProperty(Error("invariant: cache entry required but not generated"),"__NEXT_ERROR_CODE",{value:"E62",enumerable:!1,configurable:!0});return null}if((null==(f=m.value)?void 0:f.kind)!==v.CachedRouteKind.APP_PAGE)throw Object.defineProperty(Error(`Invariant app-page handler received invalid cache entry ${null==(i=m.value)?void 0:i.kind}`),"__NEXT_ERROR_CODE",{value:"E707",enumerable:!1,configurable:!0});let n="string"==typeof m.value.postponed;ax&&!au&&(!n||an)&&(O||b.setHeader("x-nextjs-cache",ah?"REVALIDATED":m.isMiss?"MISS":m.isStale?"STALE":"HIT"),b.setHeader(t.NEXT_IS_PRERENDER_HEADER,"1"));let{value:q}=m;if(at)l={revalidate:0,expire:void 0};else if(au)l={revalidate:0,expire:void 0};else if(!M.isDev)if(_)l={revalidate:0,expire:void 0};else if(ax){if(m.cacheControl)if("number"==typeof m.cacheControl.revalidate){if(m.cacheControl.revalidate<1)throw Object.defineProperty(Error(`Invalid revalidate configuration provided: ${m.cacheControl.revalidate} < 1`),"__NEXT_ERROR_CODE",{value:"E22",enumerable:!1,configurable:!0});l={revalidate:m.cacheControl.revalidate,expire:(null==(j=m.cacheControl)?void 0:j.expire)??ad.expireTime}}else l={revalidate:y.CACHE_ONE_YEAR,expire:void 0}}else b.getHeader("Cache-Control")||(l={revalidate:0,expire:void 0});if(m.cacheControl=l,"string"==typeof av&&(null==q?void 0:q.kind)===v.CachedRouteKind.APP_PAGE&&q.segmentData){b.setHeader(t.NEXT_DID_POSTPONE_HEADER,"2");let c=null==(k=q.headers)?void 0:k[y.NEXT_CACHE_TAGS_HEADER];O&&ax&&c&&"string"==typeof c&&b.setHeader(y.NEXT_CACHE_TAGS_HEADER,c);let d=q.segmentData.get(av);return void 0!==d?(0,A.sendRenderResult)({req:a,res:b,generateEtags:ad.generateEtags,poweredByHeader:ad.poweredByHeader,result:x.default.fromStatic(d,t.RSC_CONTENT_TYPE_HEADER),cacheControl:m.cacheControl}):(b.statusCode=204,(0,A.sendRenderResult)({req:a,res:b,generateEtags:ad.generateEtags,poweredByHeader:ad.poweredByHeader,result:x.default.EMPTY,cacheControl:m.cacheControl}))}let r=ay?(0,h.getRequestMeta)(a,"onCacheEntryV2")??(0,h.getRequestMeta)(a,"onCacheEntry"):(0,h.getRequestMeta)(a,"onCacheEntry");if(r&&await r(m,{url:(0,h.getRequestMeta)(a,"initURL")??a.url}))return null;if(q.headers){let a={...q.headers};for(let[c,d]of(O&&ax||delete a[y.NEXT_CACHE_TAGS_HEADER],Object.entries(a)))if(void 0!==d)if(Array.isArray(d))for(let a of d)b.appendHeader(c,a);else"number"==typeof d&&(d=d.toString()),b.appendHeader(c,d)}let s=null==(g=q.headers)?void 0:g[y.NEXT_CACHE_TAGS_HEADER];if(O&&ax&&s&&"string"==typeof s&&b.setHeader(y.NEXT_CACHE_TAGS_HEADER,s),!q.status||ao&&aq||(b.statusCode=q.status),!O&&q.status&&F.RedirectStatusCode[q.status]&&ao&&(b.statusCode=200),n&&!au&&b.setHeader(t.NEXT_DID_POSTPONE_HEADER,"1"),ao&&!_){if(void 0===q.rscData){if(q.html.contentType!==t.RSC_CONTENT_TYPE_HEADER)if(ad.cacheComponents)return b.statusCode=404,(0,A.sendRenderResult)({req:a,res:b,generateEtags:ad.generateEtags,poweredByHeader:ad.poweredByHeader,result:x.default.EMPTY,cacheControl:m.cacheControl});else throw Object.defineProperty(new G.InvariantError(`Expected RSC response, got ${q.html.contentType}`),"__NEXT_ERROR_CODE",{value:"E789",enumerable:!1,configurable:!0});return(0,A.sendRenderResult)({req:a,res:b,generateEtags:ad.generateEtags,poweredByHeader:ad.poweredByHeader,result:q.html,cacheControl:m.cacheControl})}return(0,A.sendRenderResult)({req:a,res:b,generateEtags:ad.generateEtags,poweredByHeader:ad.poweredByHeader,result:x.default.fromStatic(q.rscData,t.RSC_CONTENT_TYPE_HEADER),cacheControl:m.cacheControl})}let u=q.html;if(!n||O||ao)return(0,A.sendRenderResult)({req:a,res:b,generateEtags:ad.generateEtags,poweredByHeader:ad.poweredByHeader,result:u,cacheControl:m.cacheControl});if(ar)return u.push(new ReadableStream({start(a){a.enqueue(z.ENCODED_TAGS.CLOSED.BODY_AND_HTML),a.close()}})),(0,A.sendRenderResult)({req:a,res:b,generateEtags:ad.generateEtags,poweredByHeader:ad.poweredByHeader,result:u,cacheControl:{revalidate:0,expire:void 0}});let w=new TransformStream;return u.push(w.readable),o({span:c,postponed:q.postponed,fallbackRouteParams:null,forceStaticRender:!1}).then(async a=>{var b,c;if(!a)throw Object.defineProperty(Error("Invariant: expected a result to be returned"),"__NEXT_ERROR_CODE",{value:"E463",enumerable:!1,configurable:!0});if((null==(b=a.value)?void 0:b.kind)!==v.CachedRouteKind.APP_PAGE)throw Object.defineProperty(Error(`Invariant: expected a page response, got ${null==(c=a.value)?void 0:c.kind}`),"__NEXT_ERROR_CODE",{value:"E305",enumerable:!1,configurable:!0});await a.value.html.pipeTo(w.writable)}).catch(a=>{w.writable.abort(a).catch(a=>{console.error("couldn't abort transformer",a)})}),(0,A.sendRenderResult)({req:a,res:b,generateEtags:ad.generateEtags,poweredByHeader:ad.poweredByHeader,result:u,cacheControl:{revalidate:0,expire:void 0}})};if(!aG)return await aF.withPropagatedContext(a.headers,()=>aF.trace(i.BaseServerSpan.handleRequest,{spanName:`${aE} ${J}`,kind:g.SpanKind.SERVER,attributes:{"http.method":aE,"http.target":a.url}},q));await q(aG)}catch(b){throw b instanceof B.NoFallbackError||await M.onRequestError(a,b,{routerKind:"App Router",routePath:J,routeType:"render",revalidateReason:(0,f.c)({isStaticGeneration:ax,isOnDemandRevalidate:ah})},ac),b}}}};var b=require("../../webpack-runtime.js");b.C(a);var c=b.X(0,[843,623,825,374],()=>b(b.s=99963));module.exports=c})();