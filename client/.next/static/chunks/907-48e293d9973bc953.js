"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[907],{514:(e,r,t)=>{t.d(r,{Ol:()=>u,Zf:()=>l,we:()=>d});var n=t(8193),a=t(2809),s=t(9179);let i=null,o=0,c=!1;async function d(){let e="http://localhost:4000/api".replace("/api","")||0,r=await (0,a.iD)();return(i=(0,n.io)(e,{auth:{token:r},reconnection:!0,reconnectionDelay:1e3,reconnectionDelayMax:5e3,reconnectionAttempts:3})).on("connect",()=>{s.v.info("Socket.IO connected to server"),o=0,c=!1}),i.on("disconnect",()=>{s.v.info("Socket.IO disconnected from server")}),i.on("connect_error",e=>{o++,c||(s.v.warn("Unable to connect to backend server. Real-time updates will be unavailable."),c=!0),o>=3&&(s.v.debug("Socket.IO gave up after 3 connection attempts"),i?.disconnect())}),i.on("error",e=>{s.v.error("Socket.IO error:",e)}),i}function u(){return i}function l(){i&&(i.disconnect(),i=null),o=0,c=!1}},1721:(e,r,t)=>{t.d(r,{lH:()=>f,hk:()=>y,EB:()=>v,A8:()=>b,vm:()=>m});var n=t(857),a=t(805),s=t(9133),i=t(9477),o=t(2809);async function c(){return await (0,o.iD)()}let d=i.A.create({baseURL:"http://localhost:4000/api"});d.interceptors.request.use(async e=>{let r=await c();return r&&(e.headers.Authorization=`Bearer ${r}`),e});let u=async()=>(await d.get("/courses")).data.courses,l=async e=>(await d.get(`/graders/courses/${e}/graders`)).data.graders,g=async e=>{let r=new FormData;return r.append("course_id",e.course_id),r.append("title",e.title),e.total_marks&&r.append("total_marks",e.total_marks.toString()),e.subject_type&&r.append("subject_type",e.subject_type),e.test_file&&r.append("test_file",e.test_file),e.memo_file&&r.append("memo_file",e.memo_file),(await d.post("/graders",r,{headers:{"Content-Type":"multipart/form-data"}})).data},p=async e=>(await d.get(`/graders/${e}/submissions`)).data.submissions,f={courses:["courses"],gradersByCourse:e=>["graders","course",e],grader:e=>["graders",e],submissions:e=>["submissions",e],submission:e=>["submission",e],submissionGrades:e=>["submission",e,"grades"],analytics:e=>["analytics",e],transparency:e=>["transparency",e],transparencyGrader:e=>["transparency","grader",e]};function b(e){return(0,n.I)({queryKey:f.courses,queryFn:u,...e})}function m(){let e=(0,a.jE)();return(0,s.n)({mutationFn:g,onSuccess:()=>{e.invalidateQueries({queryKey:f.courses}),e.invalidateQueries({queryKey:["graders","course"]})}})}function y(e){let{data:r}=b();return(0,n.I)({queryKey:["graders","all"],queryFn:async()=>r&&0!==r.length?(await Promise.all(r.map(e=>l(e.id)))).flat():[],enabled:!!r&&r.length>0,...e})}function v(e){let{data:r}=y();return(0,n.I)({queryKey:["submissions","all"],queryFn:async()=>r&&0!==r.length?(await Promise.all(r.map(e=>p(e.id)))).flat():[],enabled:!!r&&r.length>0,...e})}},2809:(e,r,t)=>{t.d(r,{ND:()=>i,iD:()=>c,y2:()=>o});var n=t(7504);t(9179);let a="https://tjcgbibnyviotuywwapy.supabase.co",s="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InRqY2diaWJueXZpb3R1eXd3YXB5Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjAxNzI3MDIsImV4cCI6MjA3NTc0ODcwMn0.kiaPxueXU4FNPkzCo0w_LPTP3fjEqV95O2WIhUUA4ZA",i=a&&s&&!a.includes("your-supabase-project")&&!s.includes("your-anon-key")?(0,n.UU)(a,s,{auth:{persistSession:!0,autoRefreshToken:!0,detectSessionInUrl:!0}}):null,o=null!==i;async function c(){if(!i)return;let{data:{session:e}}=await i.auth.getSession();return e?.access_token}},6224:(e,r,t)=>{t.d(r,{E:()=>c});var n=t(3365),a=t(8806),s=t(6168),i=t(1340);let o=(0,s.F)("inline-flex items-center justify-center rounded-md border px-2 py-0.5 text-xs font-medium w-fit whitespace-nowrap shrink-0 [&>svg]:size-3 gap-1 [&>svg]:pointer-events-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive transition-[color,box-shadow] overflow-hidden",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground [a&]:hover:bg-primary/90",secondary:"border-transparent bg-secondary text-secondary-foreground [a&]:hover:bg-secondary/90",destructive:"border-transparent bg-destructive text-white [a&]:hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60",outline:"text-foreground [a&]:hover:bg-accent [a&]:hover:text-accent-foreground",success:"border-transparent bg-green-500 text-white [a&]:hover:bg-green-600",warning:"border-transparent bg-yellow-500 text-white [a&]:hover:bg-yellow-600",error:"border-transparent bg-red-500 text-white [a&]:hover:bg-red-600"}},defaultVariants:{variant:"default"}});function c({className:e,variant:r,asChild:t=!1,...s}){let c=t?a.DX:"span";return(0,n.jsx)(c,{"data-slot":"badge",className:(0,i.cn)(o({variant:r}),e),...s})}},7978:(e,r,t)=>{t.d(r,{P:()=>s});var n=t(1521),a=t(514);function s(e,r,t,s,i){(0,n.useEffect)(()=>{let n=(0,a.Ol)();if(n)return e&&n.on("grading:progress",({percentage:r,submission_id:t})=>{e(r,t)}),r&&n.on("grading:complete",({grader_id:e,submission_id:t,status:n})=>{r(e,t,n)}),t&&n.on("embedding:complete",({course_id:e,status:r})=>{t(e,r)}),s&&n.on("embedding:failed",({course_id:e,message:r})=>{s(e,r||"Embedding job failed")}),i&&n.on("grading:failed",({grader_id:e,submission_id:r,message:t})=>{i(e,r,t||"Grading job failed")}),()=>{e&&n.off("grading:progress"),r&&n.off("grading:complete"),t&&n.off("embedding:complete"),s&&n.off("embedding:failed"),i&&n.off("grading:failed")}},[e,r,t,s,i])}},9179:(e,r,t)=>{t.d(r,{v:()=>a});class n{formatMessage(e,r,...t){let n=new Date().toISOString(),a=`[${n}] [${e.toUpperCase()}]`;"error"===e?console.error(a,r,...t):"warn"===e?console.warn(a,r,...t):this.isDevelopment}info(e,...r){this.formatMessage("info",e,...r)}warn(e,...r){this.formatMessage("warn",e,...r)}error(e,...r){this.formatMessage("error",e,...r)}debug(e,...r){this.isDevelopment&&this.formatMessage("debug",e,...r)}constructor(){this.isDevelopment=!1}}let a=new n}}]);