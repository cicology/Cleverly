(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[177],{1340:(e,s,t)=>{"use strict";t.d(s,{cn:()=>i});var r=t(8662),a=t(5490);function i(...e){return(0,a.QP)((0,r.$)(e))}},1946:(e,s,t)=>{"use strict";t.d(s,{ErrorBoundary:()=>l});var r=t(3365),a=t(1521),i=t(1613),n=t(178);class l extends a.Component{constructor(e){super(e),this.handleReset=()=>{this.setState({hasError:!1,error:void 0,errorInfo:void 0})},this.state={hasError:!1}}static getDerivedStateFromError(e){return{hasError:!0,error:e}}componentDidCatch(e,s){this.setState({error:e,errorInfo:s})}render(){return this.state.hasError?this.props.fallback?this.props.fallback:(0,r.jsx)("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",minHeight:"400px",padding:"40px 20px",textAlign:"center"},children:(0,r.jsxs)("div",{className:"card glass",style:{maxWidth:"500px",padding:"32px"},children:[(0,r.jsx)(i.A,{size:48,style:{color:"var(--error-500)",margin:"0 auto 16px"}}),(0,r.jsx)("h2",{style:{marginBottom:"12px"},children:"Something went wrong"}),(0,r.jsx)("p",{className:"muted",style:{marginBottom:"24px"},children:"An unexpected error occurred. Please try refreshing the page."}),(0,r.jsxs)("button",{className:"btn",onClick:this.handleReset,style:{display:"flex",alignItems:"center",gap:"8px",margin:"0 auto"},children:[(0,r.jsx)(n.A,{size:16}),"Try again"]}),!1]})}):this.props.children}}},1975:(e,s,t)=>{"use strict";t.d(s,{Providers:()=>U});var r=t(3365),a=t(9219),i=t(805),n=t(1521),l=t(2809);let d=(0,n.createContext)(void 0);function o({children:e}){let[s,t]=(0,n.useState)(null),[a,i]=(0,n.useState)(null),[o,c]=(0,n.useState)(!0),[u,m]=(0,n.useState)(null);(0,n.useEffect)(()=>{if(!l.ND)return void c(!1);l.ND.auth.getSession().then(({data:{session:e}})=>{i(e),t(e?.user??null),c(!1)});let{data:{subscription:e}}=l.ND.auth.onAuthStateChange((e,s)=>{i(s),t(s?.user??null),c(!1)});return()=>e.unsubscribe()},[]);let x=async(e,s)=>{if(!l.ND)return{error:{message:"Supabase not configured"}};m(null);let{error:t}=await l.ND.auth.signUp({email:e,password:s});return t&&m(t.message),{error:t}},p=async(e,s)=>{if(!l.ND)return{error:{message:"Supabase not configured"}};m(null);let{error:t}=await l.ND.auth.signInWithPassword({email:e,password:s});return t&&m(t.message),{error:t}},g=async()=>{if(!l.ND)return;m(null);let{error:e}=await l.ND.auth.signOut();e&&m(e.message)},h={user:s,session:a,loading:o,isAuthenticated:!l.y2||!!s,signUp:x,signIn:p,signOut:g,error:u};return(0,r.jsx)(d.Provider,{value:h,children:e})}function c(){let e=(0,n.useContext)(d);if(void 0===e)throw Error("useAuth must be used within an AuthProvider");return e}var u=t(7821),m=t(6687),x=t(1613),p=t(578),g=t(178),h=t(3382);function f({toast:e,onDismiss:s}){return(0,n.useEffect)(()=>{if(0!==e.duration){let t=setTimeout(()=>{s(e.id)},e.duration||5e3);return()=>clearTimeout(t)}},[e.id,e.duration,s]),(0,r.jsxs)("div",{className:`toast toast-${e.type}`,children:[(0,r.jsx)("div",{className:"toast-icon",children:(()=>{switch(e.type){case"error":return(0,r.jsx)(u.A,{size:20});case"success":return(0,r.jsx)(m.A,{size:20});case"warning":return(0,r.jsx)(x.A,{size:20});default:return(0,r.jsx)(p.A,{size:20})}})()}),(0,r.jsxs)("div",{className:"toast-content",children:[(0,r.jsx)("div",{className:"toast-title",children:e.title}),(0,r.jsx)("div",{className:"toast-message",children:e.message}),e.onRetry&&(0,r.jsxs)("button",{className:"toast-retry-btn",onClick:t=>{t.stopPropagation(),e.onRetry?.(),s(e.id)},children:[(0,r.jsx)(g.A,{size:14}),"Retry"]})]}),(0,r.jsx)("button",{className:"toast-close",onClick:t=>{t.stopPropagation(),s(e.id)},children:(0,r.jsx)(h.A,{size:16})})]})}let b=(0,n.createContext)(void 0);function v({children:e}){let[s,t]=(0,n.useState)([]),a=(0,n.useCallback)(e=>{let s=`toast-${Date.now()}-${Math.random()}`;t(t=>[...t,{...e,id:s}])},[]),i=(0,n.useCallback)(e=>{t(s=>s.filter(s=>s.id!==e))},[]);return(0,r.jsxs)(b.Provider,{value:{showToast:a,dismissToast:i},children:[e,(0,r.jsx)("div",{className:"toast-container",children:s.map(e=>(0,r.jsx)(f,{toast:e,onDismiss:i},e.id))})]})}var j=t(4304),y=t(9560),N=t(2453),w=t(2165),C=t(634),k=t(1928),_=t(7001),A=t(7007),z=t(1340);function S({open:e,onClose:s,presentation:t="modal",showHero:a=!0}){let[i,d]=(0,n.useState)("signin"),[o,u]=(0,n.useState)(""),[m,x]=(0,n.useState)(""),[p,g]=(0,n.useState)(!1),{signIn:f,signUp:b,error:v}=c(),S="panel"===t;if(!e&&!S)return null;let P=async e=>{e.preventDefault(),g(!0);try{if("signin"===i){let{error:e}=await f(o,m);e||s()}else{let{error:e}=await b(o,m);e||s()}}finally{g(!1)}};return(0,r.jsxs)(r.Fragment,{children:[!l.y2&&(0,r.jsx)("div",{className:(0,z.cn)("fixed inset-0 z-50 flex items-center justify-center bg-black/60 backdrop-blur-sm px-4",S&&"static bg-transparent backdrop-blur-0 px-0"),onClick:S?void 0:s,children:(0,r.jsxs)("div",{className:"relative w-full max-w-lg rounded-3xl bg-white shadow-2xl border border-border/70 overflow-hidden",onClick:e=>e.stopPropagation(),children:[(0,r.jsx)("div",{className:"absolute inset-0 bg-[radial-gradient(circle_at_20%_20%,rgba(111,139,108,0.12),transparent_40%),radial-gradient(circle_at_80%_0%,rgba(205,214,196,0.35),transparent_35%)]"}),(0,r.jsxs)("div",{className:"relative p-6 space-y-4",children:[(0,r.jsxs)("div",{className:"flex items-start justify-between",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{className:"text-xs uppercase tracking-[0.2em] text-muted-foreground",children:"Setup needed"}),(0,r.jsx)("h2",{className:"text-2xl font-semibold text-foreground mt-1",children:"Authentication not configured"})]}),!S&&(0,r.jsx)(A.$,{variant:"ghost",size:"icon",className:"rounded-full",onClick:s,children:(0,r.jsx)(h.A,{className:"size-5"})})]}),(0,r.jsxs)("p",{className:"text-sm text-muted-foreground",children:["Add your Supabase credentials to ",(0,r.jsx)("code",{children:".env"})," to enable sign-in and sign-up flows."]}),(0,r.jsxs)("div",{className:"rounded-2xl border border-border/70 bg-muted/60 p-4 font-mono text-xs text-foreground",children:["NEXT_PUBLIC_SUPABASE_URL=your-project-url",(0,r.jsx)("br",{}),"NEXT_PUBLIC_SUPABASE_ANON_KEY=your-anon-key"]}),(0,r.jsx)("div",{className:"flex justify-end",children:(0,r.jsx)(A.$,{variant:"secondary",onClick:s,className:"rounded-full px-5",children:"Close"})})]})]})}),l.y2&&S&&(0,r.jsx)("div",{className:"relative w-full h-full",children:(0,r.jsxs)("div",{className:"relative bg-card p-6 md:p-8",children:[(0,r.jsx)("div",{className:"flex items-start justify-between",children:(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{className:"text-xs uppercase tracking-[0.2em] text-muted-foreground",children:"Authentication"}),(0,r.jsx)("h3",{className:"text-2xl font-semibold text-foreground mt-1",children:"signin"===i?"Sign in":"Create your account"}),(0,r.jsx)("p",{className:"text-sm text-muted-foreground",children:"Use your email and password to access Cleverly."})]})}),(0,r.jsxs)("div",{className:"mt-6 grid grid-cols-2 gap-2 rounded-full bg-muted p-1",children:[(0,r.jsxs)("button",{type:"button",onClick:()=>d("signin"),className:(0,z.cn)("flex items-center justify-center gap-2 rounded-full px-3 py-2 text-sm font-semibold transition-all","signin"===i?"bg-card shadow-sm text-foreground":"text-muted-foreground hover:text-foreground"),children:[(0,r.jsx)(j.A,{className:"size-4"}),"Sign In"]}),(0,r.jsxs)("button",{type:"button",onClick:()=>d("signup"),className:(0,z.cn)("flex items-center justify-center gap-2 rounded-full px-3 py-2 text-sm font-semibold transition-all","signup"===i?"bg-card shadow-sm text-foreground":"text-muted-foreground hover:text-foreground"),children:[(0,r.jsx)(y.A,{className:"size-4"}),"Sign Up"]})]}),(0,r.jsxs)("form",{onSubmit:P,className:"mt-6 space-y-4",children:[(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)("label",{className:"text-sm font-medium text-foreground",children:"Email"}),(0,r.jsxs)("div",{className:"relative",children:[(0,r.jsx)(N.A,{className:"absolute left-3 top-1/2 -translate-y-1/2 size-4 text-muted-foreground"}),(0,r.jsx)(_.p,{type:"email",placeholder:"you@example.com",value:o,onChange:e=>u(e.target.value),required:!0,className:"pl-10 rounded-xl bg-white"})]})]}),(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)("label",{className:"text-sm font-medium text-foreground",children:"Password"}),(0,r.jsxs)("div",{className:"relative",children:[(0,r.jsx)(w.A,{className:"absolute left-3 top-1/2 -translate-y-1/2 size-4 text-muted-foreground"}),(0,r.jsx)(_.p,{type:"password",placeholder:"Enter your password",value:m,onChange:e=>x(e.target.value),required:!0,minLength:6,className:"pl-10 rounded-xl bg-white"})]}),"signup"===i&&(0,r.jsx)("p",{className:"text-xs text-muted-foreground",children:"Minimum 6 characters"})]}),v&&(0,r.jsx)("div",{className:"rounded-xl border border-destructive/30 bg-destructive/10 px-3 py-2 text-sm text-destructive",children:v}),(0,r.jsx)("div",{className:"flex flex-col sm:flex-row items-center justify-end gap-3 pt-2",children:(0,r.jsx)(A.$,{type:"submit",className:"w-full sm:w-auto rounded-full px-5",disabled:p,children:p?"Processing...":"signin"===i?"Sign In":"Create Account"})})]})]})}),l.y2&&!S&&(0,r.jsx)("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/60 backdrop-blur-sm px-4",onClick:s,children:(0,r.jsx)("div",{className:"relative w-full max-w-4xl overflow-hidden rounded-3xl bg-white shadow-2xl border border-border/70",onClick:e=>e.stopPropagation(),children:(0,r.jsxs)("div",{className:"grid md:grid-cols-[1.05fr_1.2fr]",children:[a&&(0,r.jsxs)("div",{className:"relative hidden md:flex flex-col justify-between gap-6 p-8 bg-gradient-to-br from-primary/95 via-primary to-primary/85 text-primary-foreground",children:[(0,r.jsx)("div",{className:"absolute inset-0 opacity-30 bg-[radial-gradient(circle_at_20%_20%,rgba(255,255,255,0.45),transparent_40%)]"}),(0,r.jsxs)("div",{className:"relative z-10 space-y-4",children:[(0,r.jsxs)("div",{className:"inline-flex items-center gap-2 rounded-full bg-white/15 px-3 py-1 text-sm font-medium",children:[(0,r.jsx)(C.A,{className:"size-4"}),"Secure access"]}),(0,r.jsx)("h2",{className:"text-3xl font-semibold leading-tight",children:"Welcome back to Cleverly"}),(0,r.jsx)("p",{className:"text-sm text-white/85",children:"Grade faster, track submissions, and keep your rubrics in sync. Sign in to continue where you left off."})]}),(0,r.jsxs)("div",{className:"relative z-10 space-y-3",children:[["Encrypted Supabase auth","Real-time grading updates","Admin monitoring built-in"].map(e=>(0,r.jsxs)("div",{className:"flex items-center gap-2 text-sm text-white/90",children:[(0,r.jsx)(k.A,{className:"size-4"}),e]},e)),(0,r.jsxs)("div",{className:"flex items-center gap-3 pt-3 text-white/70 text-xs uppercase tracking-[0.2em]",children:[(0,r.jsx)("span",{className:"h-px w-8 bg-white/50"}),"Cleverly AI Grader",(0,r.jsx)("span",{className:"h-px w-8 bg-white/50"})]})]})]}),(0,r.jsxs)("div",{className:"relative bg-card p-6 md:p-8",children:[(0,r.jsx)(A.$,{variant:"ghost",size:"icon",className:"absolute right-4 top-4 rounded-full",onClick:s,children:(0,r.jsx)(h.A,{className:"size-5"})}),(0,r.jsx)("div",{className:"flex items-start justify-between",children:(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{className:"text-xs uppercase tracking-[0.2em] text-muted-foreground",children:"Authentication"}),(0,r.jsx)("h3",{className:"text-2xl font-semibold text-foreground mt-1",children:"signin"===i?"Sign in":"Create your account"}),(0,r.jsx)("p",{className:"text-sm text-muted-foreground",children:"Use your email and password to access Cleverly."})]})}),(0,r.jsxs)("div",{className:"mt-6 grid grid-cols-2 gap-2 rounded-full bg-muted p-1",children:[(0,r.jsxs)("button",{type:"button",onClick:()=>d("signin"),className:(0,z.cn)("flex items-center justify-center gap-2 rounded-full px-3 py-2 text-sm font-semibold transition-all","signin"===i?"bg-card shadow-sm text-foreground":"text-muted-foreground hover:text-foreground"),children:[(0,r.jsx)(j.A,{className:"size-4"}),"Sign In"]}),(0,r.jsxs)("button",{type:"button",onClick:()=>d("signup"),className:(0,z.cn)("flex items-center justify-center gap-2 rounded-full px-3 py-2 text-sm font-semibold transition-all","signup"===i?"bg-card shadow-sm text-foreground":"text-muted-foreground hover:text-foreground"),children:[(0,r.jsx)(y.A,{className:"size-4"}),"Sign Up"]})]}),(0,r.jsxs)("form",{onSubmit:P,className:"mt-6 space-y-4",children:[(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)("label",{className:"text-sm font-medium text-foreground",children:"Email"}),(0,r.jsxs)("div",{className:"relative",children:[(0,r.jsx)(N.A,{className:"absolute left-3 top-1/2 -translate-y-1/2 size-4 text-muted-foreground"}),(0,r.jsx)(_.p,{type:"email",placeholder:"you@example.com",value:o,onChange:e=>u(e.target.value),required:!0,className:"pl-10 rounded-xl bg-white"})]})]}),(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)("label",{className:"text-sm font-medium text-foreground",children:"Password"}),(0,r.jsxs)("div",{className:"relative",children:[(0,r.jsx)(w.A,{className:"absolute left-3 top-1/2 -translate-y-1/2 size-4 text-muted-foreground"}),(0,r.jsx)(_.p,{type:"password",placeholder:"Enter your password",value:m,onChange:e=>x(e.target.value),required:!0,minLength:6,className:"pl-10 rounded-xl bg-white"})]}),"signup"===i&&(0,r.jsx)("p",{className:"text-xs text-muted-foreground",children:"Minimum 6 characters"})]}),v&&(0,r.jsx)("div",{className:"rounded-xl border border-destructive/30 bg-destructive/10 px-3 py-2 text-sm text-destructive",children:v}),(0,r.jsxs)("div",{className:"flex flex-col sm:flex-row items-center justify-end gap-3 pt-2",children:[(0,r.jsx)(A.$,{type:"button",variant:"outline",className:"w-full sm:w-auto rounded-full",onClick:s,disabled:p,children:"Cancel"}),(0,r.jsx)(A.$,{type:"submit",className:"w-full sm:w-auto rounded-full px-5",disabled:p,children:p?"Processing...":"signin"===i?"Sign In":"Create Account"})]})]})]})]})})})]})}var P=t(3292);function E({children:e}){let{isAuthenticated:s,loading:t}=c();return l.y2?t?(0,r.jsx)("div",{className:"min-h-screen flex flex-col items-center justify-center bg-muted text-foreground px-6",children:(0,r.jsxs)("div",{className:"rounded-3xl border border-border/80 bg-card shadow-[0_25px_60px_-35px_rgba(0,0,0,0.45)] px-8 py-10 text-center space-y-4",children:[(0,r.jsx)(P.A,{className:"mx-auto size-10 animate-spin text-primary"}),(0,r.jsx)("p",{className:"text-lg font-semibold",children:"Checking authentication..."}),(0,r.jsx)("p",{className:"text-sm text-muted-foreground",children:"Hold on while we verify your session."})]})}):s?(0,r.jsx)(r.Fragment,{children:e}):(0,r.jsx)("div",{className:"min-h-screen bg-muted text-foreground flex items-center justify-center px-4 py-10",children:(0,r.jsxs)("div",{className:"w-full max-w-5xl grid md:grid-cols-[1fr_1.05fr] overflow-hidden rounded-[24px] border border-border/80 bg-card shadow-[0_28px_80px_-40px_rgba(0,0,0,0.35)]",children:[(0,r.jsxs)("div",{className:"relative hidden md:flex flex-col justify-between gap-6 p-10 bg-gradient-to-br from-primary via-primary/95 to-primary/85 text-primary-foreground",children:[(0,r.jsx)("div",{className:"absolute inset-0 opacity-25 bg-[radial-gradient(circle_at_20%_20%,rgba(255,255,255,0.55),transparent_45%)]"}),(0,r.jsxs)("div",{className:"relative z-10 space-y-4",children:[(0,r.jsxs)("div",{className:"inline-flex items-center gap-3 rounded-full bg-white/15 px-3 py-1 text-sm font-semibold",children:[(0,r.jsx)(w.A,{className:"size-4"}),"Authentication"]}),(0,r.jsx)("h1",{className:"text-3xl font-semibold leading-tight",children:"Sign in to Cleverly"}),(0,r.jsx)("p",{className:"text-base text-white/85",children:"Keep your courses, graders, and submissions protected. Secure, synced, and ready for grading."})]}),(0,r.jsx)("div",{className:"relative z-10 mt-4 space-y-3",children:["Encrypted Supabase auth","Real-time grading updates","Built-in admin monitoring"].map(e=>(0,r.jsxs)("div",{className:"flex items-center gap-2 text-sm text-white/90",children:[(0,r.jsx)(m.A,{className:"size-4"}),e]},e))})]}),(0,r.jsx)("div",{className:"bg-card p-6 md:p-8",children:(0,r.jsx)(S,{open:!0,onClose:()=>{},presentation:"panel",showHero:!1})})]})}):(0,r.jsx)(r.Fragment,{children:e})}var D=t(514),I=t(7978),T=t(6224),$=t(5421);function B({value:e=0,className:s,...t}){return(0,r.jsx)("div",{role:"progressbar","aria-valuenow":e,"aria-valuemin":0,"aria-valuemax":100,className:(0,z.cn)("relative h-2 w-full overflow-hidden rounded-full bg-muted",s),...t,children:(0,r.jsx)("div",{className:"h-full bg-primary transition-all",style:{width:`${Math.min(Math.max(e,0),100)}%`}})})}function q({jobs:e,onClearCompleted:s}){return e.length?(0,r.jsx)("div",{className:"fixed bottom-4 right-4 max-w-sm w-full z-40",children:(0,r.jsxs)($.Zp,{className:"border border-border/80 shadow-lg",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between px-4 py-3",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{className:"text-sm font-semibold text-foreground",children:"Background jobs"}),(0,r.jsxs)("p",{className:"text-xs text-muted-foreground",children:[e.length," active"]})]}),(0,r.jsx)(A.$,{variant:"ghost",size:"sm",className:"rounded-full",onClick:s,children:"Clear done"})]}),(0,r.jsx)("div",{className:"divide-y divide-border/70",children:e.map(e=>(0,r.jsxs)("div",{className:"px-4 py-3 space-y-2",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[(0,r.jsx)(T.E,{variant:"secondary",className:"capitalize",children:e.type}),(0,r.jsx)("span",{className:"text-xs text-muted-foreground",children:e.submissionId||e.courseId||e.id})]}),(0,r.jsx)(T.E,{className:"capitalize",variant:"completed"===e.status?"success":"failed"===e.status?"destructive":"secondary",children:e.status})]}),"processing"===e.status&&"number"==typeof e.progress&&(0,r.jsx)(B,{value:e.progress,className:"h-2"}),e.error&&(0,r.jsx)("p",{className:"text-xs text-destructive",children:e.error})]},e.id))})]})}):null}var F=t(1721);function R(){let[e,s]=(0,n.useState)([]),t=(0,i.jE)(),{showToast:a}=function(){let e=(0,n.useContext)(b);if(!e)throw Error("useToast must be used within ToastProvider");return e}();(0,n.useEffect)(()=>((0,D.we)(),()=>{(0,D.Zf)()}),[]);let l=(0,n.useCallback)((e,t)=>{s(s=>{let r=s.findIndex(e=>"grading"===e.type&&e.submissionId===t);if(!(r>=0))return[...s,{id:`grading-${t}`,type:"grading",status:"processing",progress:e,submissionId:t,startTime:Date.now()}];{let t=[...s];return t[r]={...t[r],progress:e,status:"processing"},t}})},[]),d=(0,n.useCallback)((e,r,i)=>{s(e=>{let s=e.findIndex(e=>"grading"===e.type&&e.submissionId===r);if(s>=0){let t=[...e];return t[s]={...t[s],status:"completed",progress:100,endTime:Date.now()},t}return e}),t.invalidateQueries({queryKey:F.lH.submissions(e)}),t.invalidateQueries({queryKey:F.lH.submission(r)}),t.invalidateQueries({queryKey:F.lH.submissionGrades(r)}),t.invalidateQueries({queryKey:F.lH.analytics(e)}),a({type:"success",title:"Grading Complete",message:`Submission ${r.slice(0,8)} has been graded successfully.`,duration:5e3})},[t,a]),o=(0,n.useCallback)((e,r)=>{s(s=>{let t=s.findIndex(s=>"embedding"===s.type&&s.courseId===e);if(t>=0){let e=[...s];return e[t]={...e[t],status:"completed",endTime:Date.now()},e}return s}),t.invalidateQueries({queryKey:F.lH.courses}),a({type:"success",title:"Embedding Complete",message:"Course files have been embedded successfully.",duration:5e3})},[t,a]),c=(0,n.useCallback)((e,t)=>{s(s=>{let r=s.findIndex(s=>"embedding"===s.type&&s.courseId===e);if(!(r>=0))return[...s,{id:`embedding-${e}`,type:"embedding",status:"failed",error:t,courseId:e,startTime:Date.now(),endTime:Date.now()}];{let e=[...s];return e[r]={...e[r],status:"failed",error:t,endTime:Date.now()},e}}),a({type:"error",title:"Embedding Failed",message:t||"Failed to embed course files. Please try again.",duration:0})},[a]),u=(0,n.useCallback)((e,t,r)=>{s(s=>{let a=s.findIndex(e=>"grading"===e.type&&e.submissionId===t);if(!(a>=0))return[...s,{id:`grading-${t}`,type:"grading",status:"failed",error:r,submissionId:t,graderId:e,startTime:Date.now(),endTime:Date.now()}];{let e=[...s];return e[a]={...e[a],status:"failed",error:r,endTime:Date.now()},e}}),a({type:"error",title:"Grading Failed",message:r||"Failed to grade submission. Please try again.",duration:0})},[a]);(0,I.P)(l,d,o,c,u);let m=(0,n.useCallback)(()=>{s(e=>e.filter(e=>"processing"===e.status))},[]);return(0,r.jsx)(q,{jobs:e,onClearCompleted:m})}function U({children:e}){let[s]=(0,n.useState)(()=>new a.E({defaultOptions:{queries:{staleTime:6e4,refetchOnWindowFocus:!1}}}));return(0,r.jsx)(i.Ht,{client:s,children:(0,r.jsx)(o,{children:(0,r.jsx)(v,{children:(0,r.jsxs)(E,{children:[(0,r.jsx)(R,{}),e]})})})})}},3333:()=>{},5421:(e,s,t)=>{"use strict";t.d(s,{BT:()=>d,Wu:()=>c,X9:()=>o,ZB:()=>l,Zp:()=>i,aR:()=>n});var r=t(3365);t(1521);var a=t(1340);function i({className:e,...s}){return(0,r.jsx)("div",{"data-slot":"card",className:(0,a.cn)("bg-card text-card-foreground flex flex-col gap-6 rounded-xl border py-6 shadow-sm",e),...s})}function n({className:e,...s}){return(0,r.jsx)("div",{"data-slot":"card-header",className:(0,a.cn)("@container/card-header grid auto-rows-min grid-rows-[auto_auto] items-start gap-2 px-6 has-data-[slot=card-action]:grid-cols-[1fr_auto] [.border-b]:pb-6",e),...s})}function l({className:e,...s}){return(0,r.jsx)("div",{"data-slot":"card-title",className:(0,a.cn)("leading-none font-semibold",e),...s})}function d({className:e,...s}){return(0,r.jsx)("div",{"data-slot":"card-description",className:(0,a.cn)("text-muted-foreground text-sm",e),...s})}function o({className:e,...s}){return(0,r.jsx)("div",{"data-slot":"card-action",className:(0,a.cn)("col-start-2 row-span-2 row-start-1 self-start justify-self-end",e),...s})}function c({className:e,...s}){return(0,r.jsx)("div",{"data-slot":"card-content",className:(0,a.cn)("px-6",e),...s})}},7001:(e,s,t)=>{"use strict";t.d(s,{p:()=>n});var r=t(3365),a=t(1521),i=t(1340);let n=a.forwardRef(({className:e,type:s,...t},a)=>(0,r.jsx)("input",{type:s,"data-slot":"input",className:(0,i.cn)("file:text-foreground placeholder:text-muted-foreground selection:bg-primary selection:text-primary-foreground dark:bg-input/30 border-input h-9 w-full min-w-0 rounded-md border bg-transparent px-3 py-1 text-base shadow-xs transition-[color,box-shadow] outline-none file:inline-flex file:h-7 file:border-0 file:bg-transparent file:text-sm file:font-medium disabled:pointer-events-none disabled:cursor-not-allowed disabled:opacity-50 md:text-sm","focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px]","aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive",e),ref:a,...t}));n.displayName="Input"},7007:(e,s,t)=>{"use strict";t.d(s,{$:()=>d});var r=t(3365);t(1521);var a=t(8806),i=t(6168),n=t(1340);let l=(0,i.F)("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-all disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 shrink-0 [&_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-white hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60",outline:"border bg-background shadow-xs hover:bg-accent hover:text-accent-foreground dark:bg-input/30 dark:border-input dark:hover:bg-input/50",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground dark:hover:bg-accent/50",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-9 px-4 py-2 has-[>svg]:px-3",sm:"h-8 rounded-md gap-1.5 px-3 has-[>svg]:px-2.5",lg:"h-10 rounded-md px-6 has-[>svg]:px-4",icon:"size-9","icon-sm":"size-8","icon-lg":"size-10"}},defaultVariants:{variant:"default",size:"default"}});function d({className:e,variant:s,size:t,asChild:i=!1,...d}){let o=i?a.DX:"button";return(0,r.jsx)(o,{"data-slot":"button",className:(0,n.cn)(l({variant:s,size:t,className:e})),...d})}},7144:(e,s,t)=>{Promise.resolve().then(t.t.bind(t,3333,23)),Promise.resolve().then(t.bind(t,1975)),Promise.resolve().then(t.bind(t,1946)),Promise.resolve().then(t.bind(t,4534)),Promise.resolve().then(t.t.bind(t,5562,23)),Promise.resolve().then(t.t.bind(t,3613,23)),Promise.resolve().then(t.t.bind(t,8791,23)),Promise.resolve().then(t.t.bind(t,8707,23)),Promise.resolve().then(t.t.bind(t,5576,23))}},e=>{e.O(0,[883,424,179,757,727,762,907,347,158,358],()=>e(e.s=7144)),_N_E=e.O()}]);