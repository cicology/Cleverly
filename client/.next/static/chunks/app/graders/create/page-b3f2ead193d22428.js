(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[638],{1721:(e,s,t)=>{"use strict";t.d(s,{lH:()=>h,hk:()=>f,EB:()=>j,A8:()=>x,vm:()=>g});var a=t(857),r=t(805),i=t(9133),n=t(9477),l=t(2809);async function o(){return await (0,l.iD)()}let d=n.A.create({baseURL:"http://localhost:4000/api"});d.interceptors.request.use(async e=>{let s=await o();return s&&(e.headers.Authorization=`Bearer ${s}`),e});let c=async()=>(await d.get("/courses")).data.courses,u=async e=>(await d.get(`/graders/courses/${e}/graders`)).data.graders,m=async e=>{let s=new FormData;return s.append("course_id",e.course_id),s.append("title",e.title),e.total_marks&&s.append("total_marks",e.total_marks.toString()),e.subject_type&&s.append("subject_type",e.subject_type),e.test_file&&s.append("test_file",e.test_file),e.memo_file&&s.append("memo_file",e.memo_file),(await d.post("/graders",s,{headers:{"Content-Type":"multipart/form-data"}})).data},p=async e=>(await d.get(`/graders/${e}/submissions`)).data.submissions,h={courses:["courses"],gradersByCourse:e=>["graders","course",e],grader:e=>["graders",e],submissions:e=>["submissions",e],submission:e=>["submission",e],submissionGrades:e=>["submission",e,"grades"],analytics:e=>["analytics",e],transparency:e=>["transparency",e],transparencyGrader:e=>["transparency","grader",e]};function x(e){return(0,a.I)({queryKey:h.courses,queryFn:c,...e})}function g(){let e=(0,r.jE)();return(0,i.n)({mutationFn:m,onSuccess:()=>{e.invalidateQueries({queryKey:h.courses}),e.invalidateQueries({queryKey:["graders","course"]})}})}function f(e){let{data:s}=x();return(0,a.I)({queryKey:["graders","all"],queryFn:async()=>s&&0!==s.length?(await Promise.all(s.map(e=>u(e.id)))).flat():[],enabled:!!s&&s.length>0,...e})}function j(e){let{data:s}=f();return(0,a.I)({queryKey:["submissions","all"],queryFn:async()=>s&&0!==s.length?(await Promise.all(s.map(e=>p(e.id)))).flat():[],enabled:!!s&&s.length>0,...e})}},1777:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>z});var a=t(3365),r=t(1521),i=t(9717),n=t(1349),l=t(7007),o=t(7001),d=t(1863),c=t(5421),u=t(4360),m=t(5188),p=t(7494),h=t(453),x=t(1340);function g({...e}){return(0,a.jsx)(u.bL,{"data-slot":"select",...e})}function f({...e}){return(0,a.jsx)(u.WT,{"data-slot":"select-value",...e})}function j({className:e,size:s="default",children:t,...r}){return(0,a.jsxs)(u.l9,{"data-slot":"select-trigger","data-size":s,className:(0,x.cn)("border-input data-[placeholder]:text-muted-foreground [&_svg:not([class*='text-'])]:text-muted-foreground focus-visible:border-ring focus-visible:ring-ring/50 aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive dark:bg-input/30 dark:hover:bg-input/50 flex w-fit items-center justify-between gap-2 rounded-md border bg-transparent px-3 py-2 text-sm whitespace-nowrap shadow-xs transition-[color,box-shadow] outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50 data-[size=default]:h-9 data-[size=sm]:h-8 *:data-[slot=select-value]:line-clamp-1 *:data-[slot=select-value]:flex *:data-[slot=select-value]:items-center *:data-[slot=select-value]:gap-2 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",e),...r,children:[t,(0,a.jsx)(u.In,{asChild:!0,children:(0,a.jsx)(m.A,{className:"size-4 opacity-50"})})]})}function b({className:e,children:s,position:t="item-aligned",align:r="center",...i}){return(0,a.jsx)(u.ZL,{children:(0,a.jsxs)(u.UC,{"data-slot":"select-content",className:(0,x.cn)("bg-popover text-popover-foreground data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 relative z-50 max-h-(--radix-select-content-available-height) min-w-[8rem] origin-(--radix-select-content-transform-origin) overflow-x-hidden overflow-y-auto rounded-md border shadow-md","popper"===t&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",e),position:t,align:r,...i,children:[(0,a.jsx)(y,{}),(0,a.jsx)(u.LM,{className:(0,x.cn)("p-1","popper"===t&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)] scroll-my-1"),children:s}),(0,a.jsx)(N,{})]})})}function v({className:e,children:s,...t}){return(0,a.jsxs)(u.q7,{"data-slot":"select-item",className:(0,x.cn)("focus:bg-accent focus:text-accent-foreground [&_svg:not([class*='text-'])]:text-muted-foreground relative flex w-full cursor-default items-center gap-2 rounded-sm py-1.5 pr-8 pl-2 text-sm outline-hidden select-none data-[disabled]:pointer-events-none data-[disabled]:opacity-50 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4 *:[span]:last:flex *:[span]:last:items-center *:[span]:last:gap-2",e),...t,children:[(0,a.jsx)("span",{"data-slot":"select-item-indicator",className:"absolute right-2 flex size-3.5 items-center justify-center",children:(0,a.jsx)(u.VF,{children:(0,a.jsx)(p.A,{className:"size-4"})})}),(0,a.jsx)(u.p4,{children:s})]})}function y({className:e,...s}){return(0,a.jsx)(u.PP,{"data-slot":"select-scroll-up-button",className:(0,x.cn)("flex cursor-default items-center justify-center py-1",e),...s,children:(0,a.jsx)(h.A,{className:"size-4"})})}function N({className:e,...s}){return(0,a.jsx)(u.wn,{"data-slot":"select-scroll-down-button",className:(0,x.cn)("flex cursor-default items-center justify-center py-1",e),...s,children:(0,a.jsx)(m.A,{className:"size-4"})})}var w=t(8895),k=t(9387),_=t(1721),F=t(6525);let C=[{value:"general",label:"General",description:"Standard grading for most subjects"},{value:"stem",label:"STEM",description:"Method marks & formulas (Math, Physics, Chemistry)"},{value:"essay",label:"Essay",description:"Thesis, evidence & analysis (English, History)"},{value:"programming",label:"Programming",description:"Logic, efficiency & edge cases"},{value:"business",label:"Business",description:"Frameworks & strategic analysis"},{value:"sciences",label:"Sciences",description:"Terminology, processes & lab work"},{value:"languages",label:"Languages",description:"Grammar, vocabulary & fluency"}];function z(){let e=(0,i.useRouter)(),{data:s,isLoading:t}=(0,_.A8)(),u=(0,_.vm)(),[m,p]=(0,r.useState)(""),[h,x]=(0,r.useState)(""),[y,N]=(0,r.useState)(""),[z,I]=(0,r.useState)("general"),[M,S]=(0,r.useState)(null),[P,A]=(0,r.useState)(null),T=async s=>{if(s.preventDefault(),!m)return void F.oR.error("Please select a course");if(!h)return void F.oR.error("Please enter a grader title");if(!M||!P)return void F.oR.error("Please upload both test and memo files");try{await u.mutateAsync({course_id:m,title:h,total_marks:y?parseInt(y):void 0,subject_type:z,test_file:M,memo_file:P}),F.oR.success("Grader created successfully!"),e.push("/graders")}catch(e){console.error("Failed to create grader:",e),F.oR.error(e.message||"Failed to create grader")}};return(0,a.jsx)(n.e,{children:(0,a.jsxs)("div",{className:"max-w-2xl mx-auto space-y-6 pb-20 md:pb-0",children:[(0,a.jsxs)("div",{className:"flex items-center gap-4",children:[(0,a.jsx)(l.$,{variant:"ghost",size:"icon-sm",onClick:()=>e.back(),className:"touch-manipulation shrink-0",children:(0,a.jsx)(w.A,{className:"size-4"})}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h1",{className:"text-3xl font-bold text-foreground mb-2",children:"Create Grader"}),(0,a.jsx)("p",{className:"text-muted-foreground",children:"Set up automated grading for your assignments"})]})]}),(0,a.jsxs)("form",{onSubmit:T,className:"space-y-6",children:[(0,a.jsxs)(c.Zp,{children:[(0,a.jsxs)(c.aR,{children:[(0,a.jsx)(c.ZB,{children:"Grader Information"}),(0,a.jsx)(c.BT,{children:"Configure the basic details for your grading rubric"})]}),(0,a.jsxs)(c.Wu,{className:"space-y-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)(d.J,{htmlFor:"course",children:"Course"}),(0,a.jsxs)(g,{value:m,onValueChange:p,disabled:t,children:[(0,a.jsx)(j,{id:"course",children:(0,a.jsx)(f,{placeholder:t?"Loading...":"Select a course"})}),(0,a.jsx)(b,{children:s?.map(e=>(0,a.jsx)(v,{value:e.id,children:e.title},e.id))})]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)(d.J,{htmlFor:"title",children:"Grader Title"}),(0,a.jsx)(o.p,{id:"title",placeholder:"e.g., Midterm Exam - Module 1",value:h,onChange:e=>x(e.target.value),required:!0})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)(d.J,{htmlFor:"totalMarks",children:"Total Marks (Optional)"}),(0,a.jsx)(o.p,{id:"totalMarks",type:"number",placeholder:"e.g., 100",value:y,onChange:e=>N(e.target.value)})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)(d.J,{htmlFor:"subjectType",children:"Subject Type"}),(0,a.jsxs)(g,{value:z,onValueChange:I,children:[(0,a.jsx)(j,{id:"subjectType",children:(0,a.jsx)(f,{})}),(0,a.jsx)(b,{children:C.map(e=>(0,a.jsx)(v,{value:e.value,children:(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{className:"font-medium",children:e.label}),(0,a.jsx)("div",{className:"text-xs text-muted-foreground",children:e.description})]})},e.value))})]}),(0,a.jsx)("p",{className:"text-xs text-muted-foreground mt-1",children:"Choose the subject type to optimize grading criteria"})]})]})]}),(0,a.jsxs)(c.Zp,{children:[(0,a.jsxs)(c.aR,{children:[(0,a.jsx)(c.ZB,{children:"Upload Files"}),(0,a.jsx)(c.BT,{children:"Upload the test paper and marking memo"})]}),(0,a.jsxs)(c.Wu,{className:"space-y-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)(d.J,{htmlFor:"testFile",children:"Test/Exam Paper (PDF)"}),(0,a.jsxs)("div",{className:"mt-2",children:[(0,a.jsx)("label",{htmlFor:"testFile",className:"flex items-center justify-center w-full h-32 border-2 border-dashed rounded-lg cursor-pointer hover:bg-muted/50 transition-colors",children:M?(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("p",{className:"text-sm font-medium",children:M.name}),(0,a.jsxs)("p",{className:"text-xs text-muted-foreground",children:[(M.size/1024/1024).toFixed(2)," MB"]})]}):(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)(k.A,{className:"size-8 mx-auto mb-2 text-muted-foreground"}),(0,a.jsx)("p",{className:"text-sm text-muted-foreground",children:"Click to upload test paper"})]})}),(0,a.jsx)("input",{id:"testFile",type:"file",accept:"application/pdf",onChange:e=>S(e.target.files?.[0]||null),className:"hidden",required:!0})]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)(d.J,{htmlFor:"memoFile",children:"Marking Memo (PDF)"}),(0,a.jsxs)("div",{className:"mt-2",children:[(0,a.jsx)("label",{htmlFor:"memoFile",className:"flex items-center justify-center w-full h-32 border-2 border-dashed rounded-lg cursor-pointer hover:bg-muted/50 transition-colors",children:P?(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("p",{className:"text-sm font-medium",children:P.name}),(0,a.jsxs)("p",{className:"text-xs text-muted-foreground",children:[(P.size/1024/1024).toFixed(2)," MB"]})]}):(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)(k.A,{className:"size-8 mx-auto mb-2 text-muted-foreground"}),(0,a.jsx)("p",{className:"text-sm text-muted-foreground",children:"Click to upload marking memo"})]})}),(0,a.jsx)("input",{id:"memoFile",type:"file",accept:"application/pdf",onChange:e=>A(e.target.files?.[0]||null),className:"hidden",required:!0})]})]})]})]}),(0,a.jsxs)("div",{className:"flex justify-end gap-3",children:[(0,a.jsx)(l.$,{type:"button",variant:"outline",onClick:()=>e.back(),children:"Cancel"}),(0,a.jsx)(l.$,{type:"submit",disabled:u.isPending,children:u.isPending?"Creating...":"Create Grader"})]})]})]})})}},1863:(e,s,t)=>{"use strict";t.d(s,{J:()=>n});var a=t(3365);t(1521);var r=t(498),i=t(1340);function n({className:e,...s}){return(0,a.jsx)(r.b,{"data-slot":"label",className:(0,i.cn)("flex items-center gap-2 text-sm leading-none font-medium select-none group-data-[disabled=true]:pointer-events-none group-data-[disabled=true]:opacity-50 peer-disabled:cursor-not-allowed peer-disabled:opacity-50",e),...s})}},2809:(e,s,t)=>{"use strict";t.d(s,{ND:()=>n,iD:()=>o,y2:()=>l});var a=t(7504);t(9179);let r="https://tjcgbibnyviotuywwapy.supabase.co",i="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InRqY2diaWJueXZpb3R1eXd3YXB5Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjAxNzI3MDIsImV4cCI6MjA3NTc0ODcwMn0.kiaPxueXU4FNPkzCo0w_LPTP3fjEqV95O2WIhUUA4ZA",n=r&&i&&!r.includes("your-supabase-project")&&!i.includes("your-anon-key")?(0,a.UU)(r,i,{auth:{persistSession:!0,autoRefreshToken:!0,detectSessionInUrl:!0}}):null,l=null!==n;async function o(){if(!n)return;let{data:{session:e}}=await n.auth.getSession();return e?.access_token}},7887:(e,s,t)=>{Promise.resolve().then(t.bind(t,1777))},9179:(e,s,t)=>{"use strict";t.d(s,{v:()=>r});class a{formatMessage(e,s,...t){let a=new Date().toISOString(),r=`[${a}] [${e.toUpperCase()}]`;"error"===e?console.error(r,s,...t):"warn"===e?console.warn(r,s,...t):this.isDevelopment}info(e,...s){this.formatMessage("info",e,...s)}warn(e,...s){this.formatMessage("warn",e,...s)}error(e,...s){this.formatMessage("error",e,...s)}debug(e,...s){this.isDevelopment&&this.formatMessage("debug",e,...s)}constructor(){this.isDevelopment=!1}}let r=new a}},e=>{e.O(0,[179,888,757,553,497,347,158,358],()=>e(e.s=7887)),_N_E=e.O()}]);